import {
  __require
} from "./chunk-HYZYPRER.js";

// node_modules/@magic-sdk/types/dist/es/index.mjs
var m = ((n) => (n.MissingApiKey = "MISSING_API_KEY", n.ModalNotReady = "MODAL_NOT_READY", n.MalformedResponse = "MALFORMED_RESPONSE", n.InvalidArgument = "INVALID_ARGUMENT", n.ExtensionNotInitialized = "EXTENSION_NOT_INITIALIZED", n.IncompatibleExtensions = "INCOMPATIBLE_EXTENSIONS", n))(m || {});
var a = ((i) => (i.SyncWeb3Method = "SYNC_WEB3_METHOD", i.DuplicateIframe = "DUPLICATE_IFRAME", i.ReactNativeEndpointConfiguration = "REACT_NATIVE_ENDPOINT_CONFIGURATION", i.DeprecationNotice = "DEPRECATION_NOTICE", i))(a || {});
var p = ((t) => (t[t.ParseError = -32700] = "ParseError", t[t.InvalidRequest = -32600] = "InvalidRequest", t[t.MethodNotFound = -32601] = "MethodNotFound", t[t.InvalidParams = -32602] = "InvalidParams", t[t.InternalError = -32603] = "InternalError", t[t.MagicLinkFailedVerification = -1e4] = "MagicLinkFailedVerification", t[t.MagicLinkExpired = -10001] = "MagicLinkExpired", t[t.MagicLinkRateLimited = -10002] = "MagicLinkRateLimited", t[t.MagicLinkInvalidRedirectURL = -10006] = "MagicLinkInvalidRedirectURL", t[t.UserAlreadyLoggedIn = -10003] = "UserAlreadyLoggedIn", t[t.UpdateEmailFailed = -10004] = "UpdateEmailFailed", t[t.UserRequestEditEmail = -10005] = "UserRequestEditEmail", t[t.InactiveRecipient = -10010] = "InactiveRecipient", t[t.AccessDeniedToUser = -10011] = "AccessDeniedToUser", t))(p || {});
var u = ((e) => (e.LoginWithSms = "magic_auth_login_with_sms", e.LoginWithEmailOTP = "magic_auth_login_with_email_otp", e.LoginWithMagicLink = "magic_auth_login_with_magic_link", e.LoginWithCredential = "magic_auth_login_with_credential", e.GetIdToken = "magic_auth_get_id_token", e.GenerateIdToken = "magic_auth_generate_id_token", e.GetMetadata = "magic_auth_get_metadata", e.IsLoggedIn = "magic_auth_is_logged_in", e.Logout = "magic_auth_logout", e.UpdateEmail = "magic_auth_update_email", e.UserSettings = "magic_auth_settings", e.UserSettingsTestMode = "magic_auth_settings_testing_mode", e.LoginWithSmsTestMode = "magic_auth_login_with_sms_testing_mode", e.LoginWithEmailOTPTestMode = "magic_auth_login_with_email_otp_testing_mode", e.LoginWithMagicLinkTestMode = "magic_login_with_magic_link_testing_mode", e.LoginWithCredentialTestMode = "magic_auth_login_with_credential_testing_mode", e.GetIdTokenTestMode = "magic_auth_get_id_token_testing_mode", e.GenerateIdTokenTestMode = "magic_auth_generate_id_token_testing_mode", e.GetMetadataTestMode = "magic_auth_get_metadata_testing_mode", e.IsLoggedInTestMode = "magic_auth_is_logged_in_testing_mode", e.LogoutTestMode = "magic_auth_logout_testing_mode", e.UpdateEmailTestMode = "magic_auth_update_email_testing_mode", e.IntermediaryEvent = "magic_intermediary_event", e.RequestAccounts = "eth_requestAccounts", e.GetInfo = "mc_get_wallet_info", e.ShowUI = "mc_wallet", e.RequestUserInfoWithUI = "mc_request_user_info", e.Disconnect = "mc_disconnect", e.UpdatePhoneNumber = "magic_auth_update_phone_number", e.UpdatePhoneNumberTestMode = "magic_auth_update_phone_number_testing_mode", e.RecoverAccount = "magic_auth_recover_account", e.RecoverAccountTestMode = "magic_auth_recover_account_testing_mode", e))(u || {});
var o = ((_2) => (_2.MAGIC_HANDLE_RESPONSE = "MAGIC_HANDLE_RESPONSE", _2.MAGIC_OVERLAY_READY = "MAGIC_OVERLAY_READY", _2.MAGIC_SHOW_OVERLAY = "MAGIC_SHOW_OVERLAY", _2.MAGIC_HIDE_OVERLAY = "MAGIC_HIDE_OVERLAY", _2.MAGIC_HANDLE_EVENT = "MAGIC_HANDLE_EVENT", _2))(o || {});
var r = ((s) => (s.MAGIC_HANDLE_REQUEST = "MAGIC_HANDLE_REQUEST", s))(r || {});
var c = ((s) => (s.Harmony = "HARMONY", s))(c || {});

// node_modules/@magic-sdk/provider/dist/es/index.mjs
var vt = Object.create;
var Y = Object.defineProperty;
var Tt = Object.defineProperties;
var It = Object.getOwnPropertyDescriptor;
var xt = Object.getOwnPropertyDescriptors;
var Pt = Object.getOwnPropertyNames;
var Se = Object.getOwnPropertySymbols;
var bt = Object.getPrototypeOf;
var Ce = Object.prototype.hasOwnProperty;
var $t = Object.prototype.propertyIsEnumerable;
var Oe = (n, e, t) => e in n ? Y(n, e, { enumerable: true, configurable: true, writable: true, value: t }) : n[e] = t;
var Z = (n, e) => {
  for (var t in e || (e = {}))
    Ce.call(e, t) && Oe(n, t, e[t]);
  if (Se)
    for (var t of Se(e))
      $t.call(e, t) && Oe(n, t, e[t]);
  return n;
};
var _e = (n, e) => Tt(n, xt(e));
var Mt = (n, e) => () => (e || n((e = { exports: {} }).exports, e), e.exports);
var Nt = (n, e) => {
  for (var t in e)
    Y(n, t, { get: e[t], enumerable: true });
};
var wt = (n, e, t, r2) => {
  if (e && typeof e == "object" || typeof e == "function")
    for (let o2 of Pt(e))
      !Ce.call(n, o2) && o2 !== t && Y(n, o2, { get: () => e[o2], enumerable: !(r2 = It(e, o2)) || r2.enumerable });
  return n;
};
var At = (n, e, t) => (t = n != null ? vt(bt(n)) : {}, wt(e || !n || !n.__esModule ? Y(t, "default", { value: n, enumerable: true }) : t, n));
var x = (n, e, t) => new Promise((r2, o2) => {
  var s = (c2) => {
    try {
      i(t.next(c2));
    } catch (p2) {
      o2(p2);
    }
  }, a2 = (c2) => {
    try {
      i(t.throw(c2));
    } catch (p2) {
      o2(p2);
    }
  }, i = (c2) => c2.done ? r2(c2.value) : Promise.resolve(c2.value).then(s, a2);
  i((t = t.apply(n, e)).next());
});
var ct = Mt((gr, Pe) => {
  "use strict";
  var $n = Object.prototype.hasOwnProperty, T = "~";
  function B() {
  }
  Object.create && (B.prototype = /* @__PURE__ */ Object.create(null), new B().__proto__ || (T = false));
  function Mn(n, e, t) {
    this.fn = n, this.context = e, this.once = t || false;
  }
  function at2(n, e, t, r2, o2) {
    if (typeof t != "function")
      throw new TypeError("The listener must be a function");
    var s = new Mn(t, r2 || n, o2), a2 = T ? T + e : e;
    return n._events[a2] ? n._events[a2].fn ? n._events[a2] = [n._events[a2], s] : n._events[a2].push(s) : (n._events[a2] = s, n._eventsCount++), n;
  }
  function ie(n, e) {
    --n._eventsCount === 0 ? n._events = new B() : delete n._events[e];
  }
  function R() {
    this._events = new B(), this._eventsCount = 0;
  }
  R.prototype.eventNames = function() {
    var e = [], t, r2;
    if (this._eventsCount === 0)
      return e;
    for (r2 in t = this._events)
      $n.call(t, r2) && e.push(T ? r2.slice(1) : r2);
    return Object.getOwnPropertySymbols ? e.concat(Object.getOwnPropertySymbols(t)) : e;
  };
  R.prototype.listeners = function(e) {
    var t = T ? T + e : e, r2 = this._events[t];
    if (!r2)
      return [];
    if (r2.fn)
      return [r2.fn];
    for (var o2 = 0, s = r2.length, a2 = new Array(s); o2 < s; o2++)
      a2[o2] = r2[o2].fn;
    return a2;
  };
  R.prototype.listenerCount = function(e) {
    var t = T ? T + e : e, r2 = this._events[t];
    return r2 ? r2.fn ? 1 : r2.length : 0;
  };
  R.prototype.emit = function(e, t, r2, o2, s, a2) {
    var i = T ? T + e : e;
    if (!this._events[i])
      return false;
    var c2 = this._events[i], p2 = arguments.length, l, u2;
    if (c2.fn) {
      switch (c2.once && this.removeListener(e, c2.fn, void 0, true), p2) {
        case 1:
          return c2.fn.call(c2.context), true;
        case 2:
          return c2.fn.call(c2.context, t), true;
        case 3:
          return c2.fn.call(c2.context, t, r2), true;
        case 4:
          return c2.fn.call(c2.context, t, r2, o2), true;
        case 5:
          return c2.fn.call(c2.context, t, r2, o2, s), true;
        case 6:
          return c2.fn.call(c2.context, t, r2, o2, s, a2), true;
      }
      for (u2 = 1, l = new Array(p2 - 1); u2 < p2; u2++)
        l[u2 - 1] = arguments[u2];
      c2.fn.apply(c2.context, l);
    } else {
      var I = c2.length, A;
      for (u2 = 0; u2 < I; u2++)
        switch (c2[u2].once && this.removeListener(e, c2[u2].fn, void 0, true), p2) {
          case 1:
            c2[u2].fn.call(c2[u2].context);
            break;
          case 2:
            c2[u2].fn.call(c2[u2].context, t);
            break;
          case 3:
            c2[u2].fn.call(c2[u2].context, t, r2);
            break;
          case 4:
            c2[u2].fn.call(c2[u2].context, t, r2, o2);
            break;
          default:
            if (!l)
              for (A = 1, l = new Array(p2 - 1); A < p2; A++)
                l[A - 1] = arguments[A];
            c2[u2].fn.apply(c2[u2].context, l);
        }
    }
    return true;
  };
  R.prototype.on = function(e, t, r2) {
    return at2(this, e, t, r2, false);
  };
  R.prototype.once = function(e, t, r2) {
    return at2(this, e, t, r2, true);
  };
  R.prototype.removeListener = function(e, t, r2, o2) {
    var s = T ? T + e : e;
    if (!this._events[s])
      return this;
    if (!t)
      return ie(this, s), this;
    var a2 = this._events[s];
    if (a2.fn)
      a2.fn === t && (!o2 || a2.once) && (!r2 || a2.context === r2) && ie(this, s);
    else {
      for (var i = 0, c2 = [], p2 = a2.length; i < p2; i++)
        (a2[i].fn !== t || o2 && !a2[i].once || r2 && a2[i].context !== r2) && c2.push(a2[i]);
      c2.length ? this._events[s] = c2.length === 1 ? c2[0] : c2 : ie(this, s);
    }
    return this;
  };
  R.prototype.removeAllListeners = function(e) {
    var t;
    return e ? (t = T ? T + e : e, this._events[t] && ie(this, t)) : (this._events = new B(), this._eventsCount = 0), this;
  };
  R.prototype.off = R.prototype.removeListener;
  R.prototype.addListener = R.prototype.on;
  R.prefixed = T;
  R.EventEmitter = R;
  typeof Pe < "u" && (Pe.exports = R);
});
function Lt(n) {
  let e = { exports: {} };
  return n(e, e.exports), e.exports;
}
var St = Number.MAX_SAFE_INTEGER || 9007199254740991;
var Ie = { SEMVER_SPEC_VERSION: "2.0.0", MAX_LENGTH: 256, MAX_SAFE_INTEGER: St, MAX_SAFE_COMPONENT_LENGTH: 16 };
var Ot = typeof process == "object" && process.env && process.env.NODE_DEBUG && /\bsemver\b/i.test(process.env.NODE_DEBUG) ? (...n) => console.error("SEMVER", ...n) : () => {
};
var d = Ot;
var W = Lt(function(n, e) {
  let { MAX_SAFE_COMPONENT_LENGTH: t } = Ie, r2 = (e = n.exports = {}).re = [], o2 = e.src = [], s = e.t = {}, a2 = 0, i = (c2, p2, l) => {
    let u2 = a2++;
    d(u2, p2), s[c2] = u2, o2[u2] = p2, r2[u2] = new RegExp(p2, l ? "g" : void 0);
  };
  i("NUMERICIDENTIFIER", "0|[1-9]\\d*"), i("NUMERICIDENTIFIERLOOSE", "[0-9]+"), i("NONNUMERICIDENTIFIER", "\\d*[a-zA-Z-][a-zA-Z0-9-]*"), i("MAINVERSION", `(${o2[s.NUMERICIDENTIFIER]})\\.(${o2[s.NUMERICIDENTIFIER]})\\.(${o2[s.NUMERICIDENTIFIER]})`), i("MAINVERSIONLOOSE", `(${o2[s.NUMERICIDENTIFIERLOOSE]})\\.(${o2[s.NUMERICIDENTIFIERLOOSE]})\\.(${o2[s.NUMERICIDENTIFIERLOOSE]})`), i("PRERELEASEIDENTIFIER", `(?:${o2[s.NUMERICIDENTIFIER]}|${o2[s.NONNUMERICIDENTIFIER]})`), i("PRERELEASEIDENTIFIERLOOSE", `(?:${o2[s.NUMERICIDENTIFIERLOOSE]}|${o2[s.NONNUMERICIDENTIFIER]})`), i("PRERELEASE", `(?:-(${o2[s.PRERELEASEIDENTIFIER]}(?:\\.${o2[s.PRERELEASEIDENTIFIER]})*))`), i("PRERELEASELOOSE", `(?:-?(${o2[s.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${o2[s.PRERELEASEIDENTIFIERLOOSE]})*))`), i("BUILDIDENTIFIER", "[0-9A-Za-z-]+"), i("BUILD", `(?:\\+(${o2[s.BUILDIDENTIFIER]}(?:\\.${o2[s.BUILDIDENTIFIER]})*))`), i("FULLPLAIN", `v?${o2[s.MAINVERSION]}${o2[s.PRERELEASE]}?${o2[s.BUILD]}?`), i("FULL", `^${o2[s.FULLPLAIN]}$`), i("LOOSEPLAIN", `[v=\\s]*${o2[s.MAINVERSIONLOOSE]}${o2[s.PRERELEASELOOSE]}?${o2[s.BUILD]}?`), i("LOOSE", `^${o2[s.LOOSEPLAIN]}$`), i("GTLT", "((?:<|>)?=?)"), i("XRANGEIDENTIFIERLOOSE", `${o2[s.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`), i("XRANGEIDENTIFIER", `${o2[s.NUMERICIDENTIFIER]}|x|X|\\*`), i("XRANGEPLAIN", `[v=\\s]*(${o2[s.XRANGEIDENTIFIER]})(?:\\.(${o2[s.XRANGEIDENTIFIER]})(?:\\.(${o2[s.XRANGEIDENTIFIER]})(?:${o2[s.PRERELEASE]})?${o2[s.BUILD]}?)?)?`), i("XRANGEPLAINLOOSE", `[v=\\s]*(${o2[s.XRANGEIDENTIFIERLOOSE]})(?:\\.(${o2[s.XRANGEIDENTIFIERLOOSE]})(?:\\.(${o2[s.XRANGEIDENTIFIERLOOSE]})(?:${o2[s.PRERELEASELOOSE]})?${o2[s.BUILD]}?)?)?`), i("XRANGE", `^${o2[s.GTLT]}\\s*${o2[s.XRANGEPLAIN]}$`), i("XRANGELOOSE", `^${o2[s.GTLT]}\\s*${o2[s.XRANGEPLAINLOOSE]}$`), i("COERCE", `(^|[^\\d])(\\d{1,${t}})(?:\\.(\\d{1,${t}}))?(?:\\.(\\d{1,${t}}))?(?:$|[^\\d])`), i("COERCERTL", o2[s.COERCE], true), i("LONETILDE", "(?:~>?)"), i("TILDETRIM", `(\\s*)${o2[s.LONETILDE]}\\s+`, true), e.tildeTrimReplace = "$1~", i("TILDE", `^${o2[s.LONETILDE]}${o2[s.XRANGEPLAIN]}$`), i("TILDELOOSE", `^${o2[s.LONETILDE]}${o2[s.XRANGEPLAINLOOSE]}$`), i("LONECARET", "(?:\\^)"), i("CARETTRIM", `(\\s*)${o2[s.LONECARET]}\\s+`, true), e.caretTrimReplace = "$1^", i("CARET", `^${o2[s.LONECARET]}${o2[s.XRANGEPLAIN]}$`), i("CARETLOOSE", `^${o2[s.LONECARET]}${o2[s.XRANGEPLAINLOOSE]}$`), i("COMPARATORLOOSE", `^${o2[s.GTLT]}\\s*(${o2[s.LOOSEPLAIN]})$|^$`), i("COMPARATOR", `^${o2[s.GTLT]}\\s*(${o2[s.FULLPLAIN]})$|^$`), i("COMPARATORTRIM", `(\\s*)${o2[s.GTLT]}\\s*(${o2[s.LOOSEPLAIN]}|${o2[s.XRANGEPLAIN]})`, true), e.comparatorTrimReplace = "$1$2$3", i("HYPHENRANGE", `^\\s*(${o2[s.XRANGEPLAIN]})\\s+-\\s+(${o2[s.XRANGEPLAIN]})\\s*$`), i("HYPHENRANGELOOSE", `^\\s*(${o2[s.XRANGEPLAINLOOSE]})\\s+-\\s+(${o2[s.XRANGEPLAINLOOSE]})\\s*$`), i("STAR", "(<|>)?=?\\s*\\*"), i("GTE0", "^\\s*>=\\s*0.0.0\\s*$"), i("GTE0PRE", "^\\s*>=\\s*0.0.0-0\\s*$");
});
var De = /^[0-9]+$/;
var We = (n, e) => {
  let t = De.test(n), r2 = De.test(e);
  return t && r2 && (n = +n, e = +e), n === e ? 0 : t && !r2 ? -1 : r2 && !t ? 1 : n < e ? -1 : 1;
};
var Ct = (n, e) => We(e, n);
var _t = { compareIdentifiers: We, rcompareIdentifiers: Ct };
var { MAX_LENGTH: ke, MAX_SAFE_INTEGER: Q } = Ie;
var { re: qe, t: Je } = W;
var { compareIdentifiers: F } = _t;
var h = class {
  constructor(e, t) {
    if (t && typeof t == "object" || (t = { loose: !!t, includePrerelease: false }), e instanceof h) {
      if (e.loose === !!t.loose && e.includePrerelease === !!t.includePrerelease)
        return e;
      e = e.version;
    } else if (typeof e != "string")
      throw new TypeError(`Invalid Version: ${e}`);
    if (e.length > ke)
      throw new TypeError(`version is longer than ${ke} characters`);
    d("SemVer", e, t), this.options = t, this.loose = !!t.loose, this.includePrerelease = !!t.includePrerelease;
    let r2 = e.trim().match(t.loose ? qe[Je.LOOSE] : qe[Je.FULL]);
    if (!r2)
      throw new TypeError(`Invalid Version: ${e}`);
    if (this.raw = e, this.major = +r2[1], this.minor = +r2[2], this.patch = +r2[3], this.major > Q || this.major < 0)
      throw new TypeError("Invalid major version");
    if (this.minor > Q || this.minor < 0)
      throw new TypeError("Invalid minor version");
    if (this.patch > Q || this.patch < 0)
      throw new TypeError("Invalid patch version");
    r2[4] ? this.prerelease = r2[4].split(".").map((o2) => {
      if (/^[0-9]+$/.test(o2)) {
        let s = +o2;
        if (s >= 0 && s < Q)
          return s;
      }
      return o2;
    }) : this.prerelease = [], this.build = r2[5] ? r2[5].split(".") : [], this.format();
  }
  format() {
    return this.version = `${this.major}.${this.minor}.${this.patch}`, this.prerelease.length && (this.version += `-${this.prerelease.join(".")}`), this.version;
  }
  toString() {
    return this.version;
  }
  compare(e) {
    if (d("SemVer.compare", this.version, this.options, e), !(e instanceof h)) {
      if (typeof e == "string" && e === this.version)
        return 0;
      e = new h(e, this.options);
    }
    return e.version === this.version ? 0 : this.compareMain(e) || this.comparePre(e);
  }
  compareMain(e) {
    return e instanceof h || (e = new h(e, this.options)), F(this.major, e.major) || F(this.minor, e.minor) || F(this.patch, e.patch);
  }
  comparePre(e) {
    if (e instanceof h || (e = new h(e, this.options)), this.prerelease.length && !e.prerelease.length)
      return -1;
    if (!this.prerelease.length && e.prerelease.length)
      return 1;
    if (!this.prerelease.length && !e.prerelease.length)
      return 0;
    let t = 0;
    do {
      let r2 = this.prerelease[t], o2 = e.prerelease[t];
      if (d("prerelease compare", t, r2, o2), r2 === void 0 && o2 === void 0)
        return 0;
      if (o2 === void 0)
        return 1;
      if (r2 === void 0)
        return -1;
      if (r2 !== o2)
        return F(r2, o2);
    } while (++t);
  }
  compareBuild(e) {
    e instanceof h || (e = new h(e, this.options));
    let t = 0;
    do {
      let r2 = this.build[t], o2 = e.build[t];
      if (d("prerelease compare", t, r2, o2), r2 === void 0 && o2 === void 0)
        return 0;
      if (o2 === void 0)
        return 1;
      if (r2 === void 0)
        return -1;
      if (r2 !== o2)
        return F(r2, o2);
    } while (++t);
  }
  inc(e, t) {
    switch (e) {
      case "premajor":
        this.prerelease.length = 0, this.patch = 0, this.minor = 0, this.major++, this.inc("pre", t);
        break;
      case "preminor":
        this.prerelease.length = 0, this.patch = 0, this.minor++, this.inc("pre", t);
        break;
      case "prepatch":
        this.prerelease.length = 0, this.inc("patch", t), this.inc("pre", t);
        break;
      case "prerelease":
        this.prerelease.length === 0 && this.inc("patch", t), this.inc("pre", t);
        break;
      case "major":
        this.minor === 0 && this.patch === 0 && this.prerelease.length !== 0 || this.major++, this.minor = 0, this.patch = 0, this.prerelease = [];
        break;
      case "minor":
        this.patch === 0 && this.prerelease.length !== 0 || this.minor++, this.patch = 0, this.prerelease = [];
        break;
      case "patch":
        this.prerelease.length === 0 && this.patch++, this.prerelease = [];
        break;
      case "pre":
        if (this.prerelease.length === 0)
          this.prerelease = [0];
        else {
          let r2 = this.prerelease.length;
          for (; --r2 >= 0; )
            typeof this.prerelease[r2] == "number" && (this.prerelease[r2]++, r2 = -2);
          r2 === -1 && this.prerelease.push(0);
        }
        t && (this.prerelease[0] === t ? isNaN(this.prerelease[1]) && (this.prerelease = [t, 0]) : this.prerelease = [t, 0]);
        break;
      default:
        throw new Error(`invalid increment argument: ${e}`);
    }
    return this.format(), this.raw = this.version, this;
  }
};
var Dt = (n, e, t) => new h(n, t).compare(new h(e, t));
var k = Dt;
var kt = (n, e, t) => k(n, e, t) === 0;
var qt = kt;
var Jt = (n, e, t) => k(n, e, t) !== 0;
var Ut = Jt;
var Gt = (n, e, t) => k(n, e, t) > 0;
var Kt = Gt;
var Ft = (n, e, t) => k(n, e, t) >= 0;
var jt = Ft;
var Wt = (n, e, t) => k(n, e, t) < 0;
var Xt = Wt;
var Bt = (n, e, t) => k(n, e, t) <= 0;
var Ht = Bt;
var Vt = (n, e, t, r2) => {
  switch (e) {
    case "===":
      return typeof n == "object" && (n = n.version), typeof t == "object" && (t = t.version), n === t;
    case "!==":
      return typeof n == "object" && (n = n.version), typeof t == "object" && (t = t.version), n !== t;
    case "":
    case "=":
    case "==":
      return qt(n, t, r2);
    case "!=":
      return Ut(n, t, r2);
    case ">":
      return Kt(n, t, r2);
    case ">=":
      return jt(n, t, r2);
    case "<":
      return Xt(n, t, r2);
    case "<=":
      return Ht(n, t, r2);
    default:
      throw new TypeError(`Invalid operator: ${e}`);
  }
};
var Te = Vt;
var j = Symbol("SemVer ANY");
var L = class {
  static get ANY() {
    return j;
  }
  constructor(e, t) {
    if (t && typeof t == "object" || (t = { loose: !!t, includePrerelease: false }), e instanceof L) {
      if (e.loose === !!t.loose)
        return e;
      e = e.value;
    }
    d("comparator", e, t), this.options = t, this.loose = !!t.loose, this.parse(e), this.semver === j ? this.value = "" : this.value = this.operator + this.semver.version, d("comp", this);
  }
  parse(e) {
    let t = this.options.loose ? Ue[Ge.COMPARATORLOOSE] : Ue[Ge.COMPARATOR], r2 = e.match(t);
    if (!r2)
      throw new TypeError(`Invalid comparator: ${e}`);
    this.operator = r2[1] !== void 0 ? r2[1] : "", this.operator === "=" && (this.operator = ""), r2[2] ? this.semver = new h(r2[2], this.options.loose) : this.semver = j;
  }
  toString() {
    return this.value;
  }
  test(e) {
    if (d("Comparator.test", e, this.options.loose), this.semver === j || e === j)
      return true;
    if (typeof e == "string")
      try {
        e = new h(e, this.options);
      } catch (t) {
        return false;
      }
    return Te(e, this.operator, this.semver, this.options);
  }
  intersects(e, t) {
    if (!(e instanceof L))
      throw new TypeError("a Comparator is required");
    if (t && typeof t == "object" || (t = { loose: !!t, includePrerelease: false }), this.operator === "")
      return this.value === "" || new $(e.value, t).test(this.value);
    if (e.operator === "")
      return e.value === "" || new $(this.value, t).test(e.semver);
    let r2 = !(this.operator !== ">=" && this.operator !== ">" || e.operator !== ">=" && e.operator !== ">"), o2 = !(this.operator !== "<=" && this.operator !== "<" || e.operator !== "<=" && e.operator !== "<"), s = this.semver.version === e.semver.version, a2 = !(this.operator !== ">=" && this.operator !== "<=" || e.operator !== ">=" && e.operator !== "<="), i = Te(this.semver, "<", e.semver, t) && (this.operator === ">=" || this.operator === ">") && (e.operator === "<=" || e.operator === "<"), c2 = Te(this.semver, ">", e.semver, t) && (this.operator === "<=" || this.operator === "<") && (e.operator === ">=" || e.operator === ">");
    return r2 || o2 || s && a2 || i || c2;
  }
};
var { re: Ue, t: Ge } = W;
var $ = class {
  constructor(e, t) {
    if (t && typeof t == "object" || (t = { loose: !!t, includePrerelease: false }), e instanceof $)
      return e.loose === !!t.loose && e.includePrerelease === !!t.includePrerelease ? e : new $(e.raw, t);
    if (e instanceof L)
      return this.raw = e.value, this.set = [[e]], this.format(), this;
    if (this.options = t, this.loose = !!t.loose, this.includePrerelease = !!t.includePrerelease, this.raw = e, this.set = e.split(/\s*\|\|\s*/).map((r2) => this.parseRange(r2.trim())).filter((r2) => r2.length), !this.set.length)
      throw new TypeError(`Invalid SemVer Range: ${e}`);
    this.format();
  }
  format() {
    return this.range = this.set.map((e) => e.join(" ").trim()).join("||").trim(), this.range;
  }
  toString() {
    return this.range;
  }
  parseRange(e) {
    let { loose: t } = this.options;
    e = e.trim();
    let r2 = t ? g[y.HYPHENRANGELOOSE] : g[y.HYPHENRANGE];
    e = e.replace(r2, ln(this.options.includePrerelease)), d("hyphen replace", e), e = e.replace(g[y.COMPARATORTRIM], zt), d("comparator trim", e, g[y.COMPARATORTRIM]), e = (e = (e = e.replace(g[y.TILDETRIM], Yt)).replace(g[y.CARETTRIM], Zt)).split(/\s+/).join(" ");
    let o2 = t ? g[y.COMPARATORLOOSE] : g[y.COMPARATOR];
    return e.split(" ").map((s) => Qt(s, this.options)).join(" ").split(/\s+/).map((s) => cn(s, this.options)).filter(this.options.loose ? (s) => !!s.match(o2) : () => true).map((s) => new L(s, this.options));
  }
  intersects(e, t) {
    if (!(e instanceof $))
      throw new TypeError("a Range is required");
    return this.set.some((r2) => Ke(r2, t) && e.set.some((o2) => Ke(o2, t) && r2.every((s) => o2.every((a2) => s.intersects(a2, t)))));
  }
  test(e) {
    if (!e)
      return false;
    if (typeof e == "string")
      try {
        e = new h(e, this.options);
      } catch (t) {
        return false;
      }
    for (let t = 0; t < this.set.length; t++)
      if (pn(this.set[t], e, this.options))
        return true;
    return false;
  }
};
var { re: g, t: y, comparatorTrimReplace: zt, tildeTrimReplace: Yt, caretTrimReplace: Zt } = W;
var Ke = (n, e) => {
  let t = true, r2 = n.slice(), o2 = r2.pop();
  for (; t && r2.length; )
    t = r2.every((s) => o2.intersects(s, e)), o2 = r2.pop();
  return t;
};
var Qt = (n, e) => (d("comp", n, e), n = nn(n, e), d("caret", n), n = en(n, e), d("tildes", n), n = sn(n, e), d("xrange", n), n = an(n, e), d("stars", n), n);
var v = (n) => !n || n.toLowerCase() === "x" || n === "*";
var en = (n, e) => n.trim().split(/\s+/).map((t) => tn(t, e)).join(" ");
var tn = (n, e) => {
  let t = e.loose ? g[y.TILDELOOSE] : g[y.TILDE];
  return n.replace(t, (r2, o2, s, a2, i) => {
    let c2;
    return d("tilde", n, r2, o2, s, a2, i), v(o2) ? c2 = "" : v(s) ? c2 = `>=${o2}.0.0 <${+o2 + 1}.0.0-0` : v(a2) ? c2 = `>=${o2}.${s}.0 <${o2}.${+s + 1}.0-0` : i ? (d("replaceTilde pr", i), c2 = `>=${o2}.${s}.${a2}-${i} <${o2}.${+s + 1}.0-0`) : c2 = `>=${o2}.${s}.${a2} <${o2}.${+s + 1}.0-0`, d("tilde return", c2), c2;
  });
};
var nn = (n, e) => n.trim().split(/\s+/).map((t) => rn(t, e)).join(" ");
var rn = (n, e) => {
  d("caret", n, e);
  let t = e.loose ? g[y.CARETLOOSE] : g[y.CARET], r2 = e.includePrerelease ? "-0" : "";
  return n.replace(t, (o2, s, a2, i, c2) => {
    let p2;
    return d("caret", n, o2, s, a2, i, c2), v(s) ? p2 = "" : v(a2) ? p2 = `>=${s}.0.0${r2} <${+s + 1}.0.0-0` : v(i) ? p2 = s === "0" ? `>=${s}.${a2}.0${r2} <${s}.${+a2 + 1}.0-0` : `>=${s}.${a2}.0${r2} <${+s + 1}.0.0-0` : c2 ? (d("replaceCaret pr", c2), p2 = s === "0" ? a2 === "0" ? `>=${s}.${a2}.${i}-${c2} <${s}.${a2}.${+i + 1}-0` : `>=${s}.${a2}.${i}-${c2} <${s}.${+a2 + 1}.0-0` : `>=${s}.${a2}.${i}-${c2} <${+s + 1}.0.0-0`) : (d("no pr"), p2 = s === "0" ? a2 === "0" ? `>=${s}.${a2}.${i}${r2} <${s}.${a2}.${+i + 1}-0` : `>=${s}.${a2}.${i}${r2} <${s}.${+a2 + 1}.0-0` : `>=${s}.${a2}.${i} <${+s + 1}.0.0-0`), d("caret return", p2), p2;
  });
};
var sn = (n, e) => (d("replaceXRanges", n, e), n.split(/\s+/).map((t) => on(t, e)).join(" "));
var on = (n, e) => {
  n = n.trim();
  let t = e.loose ? g[y.XRANGELOOSE] : g[y.XRANGE];
  return n.replace(t, (r2, o2, s, a2, i, c2) => {
    d("xRange", n, r2, o2, s, a2, i, c2);
    let p2 = v(s), l = p2 || v(a2), u2 = l || v(i), I = u2;
    return o2 === "=" && I && (o2 = ""), c2 = e.includePrerelease ? "-0" : "", p2 ? r2 = o2 === ">" || o2 === "<" ? "<0.0.0-0" : "*" : o2 && I ? (l && (a2 = 0), i = 0, o2 === ">" ? (o2 = ">=", l ? (s = +s + 1, a2 = 0, i = 0) : (a2 = +a2 + 1, i = 0)) : o2 === "<=" && (o2 = "<", l ? s = +s + 1 : a2 = +a2 + 1), o2 === "<" && (c2 = "-0"), r2 = `${o2 + s}.${a2}.${i}${c2}`) : l ? r2 = `>=${s}.0.0${c2} <${+s + 1}.0.0-0` : u2 && (r2 = `>=${s}.${a2}.0${c2} <${s}.${+a2 + 1}.0-0`), d("xRange return", r2), r2;
  });
};
var an = (n, e) => (d("replaceStars", n, e), n.trim().replace(g[y.STAR], ""));
var cn = (n, e) => (d("replaceGTE0", n, e), n.trim().replace(g[e.includePrerelease ? y.GTE0PRE : y.GTE0], ""));
var ln = (n) => (e, t, r2, o2, s, a2, i, c2, p2, l, u2, I, A) => `${t = v(r2) ? "" : v(o2) ? `>=${r2}.0.0${n ? "-0" : ""}` : v(s) ? `>=${r2}.${o2}.0${n ? "-0" : ""}` : a2 ? `>=${t}` : `>=${t}${n ? "-0" : ""}`} ${c2 = v(p2) ? "" : v(l) ? `<${+p2 + 1}.0.0-0` : v(u2) ? `<${p2}.${+l + 1}.0-0` : I ? `<=${p2}.${l}.${u2}-${I}` : n ? `<${p2}.${l}.${+u2 + 1}-0` : `<=${c2}`}`.trim();
var pn = (n, e, t) => {
  for (let r2 = 0; r2 < n.length; r2++)
    if (!n[r2].test(e))
      return false;
  if (e.prerelease.length && !t.includePrerelease) {
    for (let r2 = 0; r2 < n.length; r2++)
      if (d(n[r2].semver), n[r2].semver !== L.ANY && n[r2].semver.prerelease.length > 0) {
        let o2 = n[r2].semver;
        if (o2.major === e.major && o2.minor === e.minor && o2.patch === e.patch)
          return true;
      }
    return false;
  }
  return true;
};
var Xe = (n, e, t) => {
  try {
    e = new $(e, t);
  } catch (r2) {
    return false;
  }
  return e.test(n);
};
var { MAX_LENGTH: un } = Ie;
var { re: Fe, t: je } = W;
var dn = (n, e) => {
  if (e && typeof e == "object" || (e = { loose: !!e, includePrerelease: false }), n instanceof h)
    return n;
  if (typeof n != "string" || n.length > un || !(e.loose ? Fe[je.LOOSE] : Fe[je.FULL]).test(n))
    return null;
  try {
    return new h(n, e);
  } catch (t) {
    return null;
  }
};
var mn = dn;
var { re: ee, t: te } = W;
var Be = (n, e) => {
  if (n instanceof h)
    return n;
  if (typeof n == "number" && (n = String(n)), typeof n != "string")
    return null;
  let t = null;
  if ((e = e || {}).rtl) {
    let r2;
    for (; (r2 = ee[te.COERCERTL].exec(n)) && (!t || t.index + t[0].length !== n.length); )
      t && r2.index + r2[0].length === t.index + t[0].length || (t = r2), ee[te.COERCERTL].lastIndex = r2.index + r2[1].length + r2[2].length;
    ee[te.COERCERTL].lastIndex = -1;
  } else
    t = n.match(ee[te.COERCE]);
  return t === null ? null : mn(`${t[2]}.${t[3] || "0"}.${t[4] || "0"}`, e);
};
function En(n) {
  return String.fromCharCode(parseInt(n.slice(1), 16));
}
function hn(n) {
  return `%${`00${n.charCodeAt(0).toString(16)}`.slice(-2)}`;
}
function fn(n) {
  return btoa(encodeURIComponent(n).replace(/%[0-9A-F]{2}/g, En));
}
function yn(n) {
  return decodeURIComponent(Array.from(atob(n), hn).join(""));
}
function ne(n) {
  return fn(JSON.stringify(n));
}
function He(n) {
  return JSON.parse(yn(n));
}
function M(n) {
  return typeof n == "undefined";
}
function vn(n) {
  return n === null;
}
function re(n) {
  return vn(n) || M(n);
}
function Ve(n) {
  return re(n) ? false : !M(n.jsonrpc) && !M(n.id) && (!M(n.result) || !M(n.error));
}
function ze(n) {
  return re(n) ? false : typeof n == "number" && Object.values(p).includes(n);
}
function se(n) {
  if (!n)
    return true;
  for (let e in n)
    if (Object.hasOwnProperty.call(n, e))
      return false;
  return true;
}
var E = {};
function Tn(n, e) {
  return Object.assign(E, e), n;
}
var Ye = { "magic-sdk": "magic-sdk", "@magic-sdk/react-native": "magic-sdk-rn", "@magic-sdk/react-native-bare": "magic-sdk-rn-bare", "@magic-sdk/react-native-expo": "magic-sdk-rn-expo" };
var b = class extends Error {
  constructor(t, r2) {
    super(`Magic SDK Error: [${t}] ${r2}`);
    this.code = t;
    this.rawMessage = r2;
    this.__proto__ = Error;
    Object.setPrototypeOf(this, b.prototype);
  }
};
var N = class extends Error {
  constructor(t) {
    super();
    this.__proto__ = Error;
    let r2 = Number(t == null ? void 0 : t.code);
    this.rawMessage = (t == null ? void 0 : t.message) || "Internal error", this.code = ze(r2) ? r2 : p.InternalError, this.message = `Magic RPC Error: [${this.code}] ${this.rawMessage}`, Object.setPrototypeOf(this, N.prototype);
  }
};
var q = class {
  constructor(e, t) {
    this.code = e;
    this.rawMessage = t;
    this.message = `Magic SDK Warning: [${e}] ${t}`;
  }
  log() {
    console.warn(this.message);
  }
};
var J = class extends Error {
  constructor(t, r2, o2, s) {
    super(`Magic Extension Error (${t.name}): [${r2}] ${o2}`);
    this.code = r2;
    this.rawMessage = o2;
    this.data = s;
    this.__proto__ = Error;
    Object.setPrototypeOf(this, J.prototype);
  }
};
var X = class {
  constructor(e, t, r2) {
    this.code = t;
    this.rawMessage = r2;
    this.message = `Magic Extension Warning (${e.name}): [${t}] ${r2}`;
  }
  log() {
    console.warn(this.message);
  }
};
function Ze() {
  return new b(m.MissingApiKey, "Please provide an API key that you acquired from the Magic developer dashboard.");
}
function pr() {
  return new b(m.ModalNotReady, "Modal is not ready.");
}
function Qe() {
  return new b(m.MalformedResponse, "Response from the Magic iframe is malformed.");
}
function et(n) {
  return new b(m.ExtensionNotInitialized, `Extensions must be initialized with a Magic SDK instance before \`Extension.${n}\` can be accessed. Do not invoke \`Extension.${n}\` inside an extension constructor.`);
}
function tt(n) {
  let e = `Some extensions are incompatible with \`${E.sdkName}@${E.version}\`:`;
  return n.filter((t) => typeof t.compat != "undefined" && t.compat !== null).forEach((t) => {
    let r2 = t.compat[E.sdkName];
    typeof r2 == "string" ? e += `
  - Extension \`${t.name}\` supports version(s) \`${r2}\`` : r2 || (e += `
  - Extension \`${t.name}\` does not support ${E.platform} environments.`);
  }), new b(m.IncompatibleExtensions, e);
}
function nt(n) {
  let e = (t) => {
    let r2 = t + 1, o2 = r2 % 10, s = r2 % 100;
    return o2 === 1 && s !== 11 ? `${r2}st` : o2 === 2 && s !== 12 ? `${r2}nd` : o2 === 3 && s !== 13 ? `${r2}rd` : `${r2}th`;
  };
  return new b(m.InvalidArgument, `Invalid ${e(n.argument)} argument given to \`${n.procedure}\`.
  Expected: \`${n.expected}\`
  Received: \`${n.received}\``);
}
function ur() {
  return new q(a.DuplicateIframe, "Duplicate iframes found.");
}
function rt() {
  return new q(a.SyncWeb3Method, "Non-async web3 methods are deprecated in web3 > 1.0 and are not supported by the Magic web3 provider. Please use an async method instead.");
}
function st() {
  return new q(a.ReactNativeEndpointConfiguration, `CUSTOM DOMAINS ARE NOT SUPPORTED WHEN USING MAGIC SDK WITH REACT NATIVE! The \`endpoint\` parameter SHOULD NOT be provided. The Magic \`<iframe>\` is automatically wrapped by a WebView pointed at \`${E.defaultEndpoint}\`. Changing this default behavior will lead to unexpected results and potentially security-threatening bugs.`);
}
function* xn() {
  let n = 0;
  for (; ; )
    n < Number.MAX_SAFE_INTEGER ? yield ++n : n = 0;
}
var Pn = xn();
function xe() {
  return Pn.next().value;
}
var ot = Symbol("Payload pre-processed by Magic SDK");
function it(n) {
  return Object.defineProperty(n, ot, { value: true, enumerable: false }), n;
}
function bn(n) {
  return !!n[ot];
}
function _(n) {
  var e, t, r2;
  return bn(n) || (n.jsonrpc = (e = n.jsonrpc) != null ? e : "2.0", n.id = xe(), n.method = (t = n.method) != null ? t : "noop", n.params = (r2 = n.params) != null ? r2 : [], it(n)), n;
}
function m2(n, e = []) {
  return it({ params: e, method: n, jsonrpc: "2.0", id: xe() });
}
var S = class {
  constructor(e) {
    e instanceof S ? (this._jsonrpc = e.payload.jsonrpc, this._id = e.payload.id, this._result = e.payload.result, this._error = e.payload.error) : Ve(e) ? (this._jsonrpc = e.jsonrpc, this._id = e.id, this._result = e.result, this._error = e.error) : (this._jsonrpc = e.jsonrpc, this._id = e.id, this._result = void 0, this._error = void 0);
  }
  applyError(e) {
    return this._error = e, this;
  }
  applyResult(e) {
    return this._result = e, this;
  }
  get hasError() {
    return typeof this._error != "undefined" && this._error !== null;
  }
  get hasResult() {
    return typeof this._result != "undefined";
  }
  get payload() {
    return { jsonrpc: this._jsonrpc, id: this._id, result: this._result, error: this._error };
  }
};
var lt = At(ct());
var be = class extends lt.default {
};
function ae() {
  let n = new be();
  return { emitter: n, createChainingEmitterMethod: (r2, o2) => (...s) => (n[r2].apply(n, s), o2), createBoundEmitterMethod: (r2) => (...o2) => n[r2].apply(n, o2) };
}
var pt = Symbol("isPromiEvent");
function ut(n) {
  return !!n[pt];
}
function ce(n) {
  let e = $e(n), { createBoundEmitterMethod: t, createChainingEmitterMethod: r2 } = ae(), o2 = Symbol("Promise.then"), s = Symbol("Promise.catch"), a2 = Symbol("Promise.finally"), i = (l, u2) => (...I) => {
    let A = u2[l].apply(u2, I);
    return c2(A);
  }, c2 = (l) => Object.assign(l, { [pt]: true, [o2]: l[o2] || l.then, [s]: l[s] || l.catch, [a2]: l[a2] || l.finally, then: i(o2, l), catch: i(s, l), finally: i(a2, l), on: r2("on", l), once: r2("once", l), addListener: r2("addListener", l), off: r2("off", l), removeListener: r2("removeListener", l), removeAllListeners: r2("removeAllListeners", l), emit: t("emit"), eventNames: t("eventNames"), listeners: t("listeners"), listenerCount: t("listenerCount") }), p2 = c2(e.then((l) => (p2.emit("done", l), p2.emit("settled"), l), (l) => {
    throw p2.emit("error", l), p2.emit("settled"), l;
  }));
  return p2;
}
function $e(n) {
  return new Promise((e, t) => {
    let r2 = n(e, t);
    Promise.resolve(r2).catch(t);
  });
}
var P = class {
  constructor(e) {
    this.sdk = e;
  }
  get overlay() {
    return this.sdk.overlay;
  }
  request(e) {
    let t = this.overlay.post(r.MAGIC_HANDLE_REQUEST, _(e)), r2 = ce((s, a2) => {
      t.then((i) => {
        if (o2(), i.hasError)
          a2(new N(i.payload.error));
        else if (i.hasResult)
          s(i.payload.result);
        else
          throw Qe();
      }).catch((i) => {
        o2(), a2(i);
      });
    }), o2 = this.overlay.on(o.MAGIC_HANDLE_EVENT, (s) => {
      var i;
      let { response: a2 } = s.data;
      if (a2.id === e.id && ((i = a2.result) == null ? void 0 : i.event)) {
        let { event: c2, params: p2 = [] } = a2.result;
        r2.emit(c2, ...p2);
      }
    });
    return r2;
  }
  createIntermediaryEvent(e, t) {
    return (o2) => {
      let s = m2(u.IntermediaryEvent, [{ payloadId: t, eventType: e, args: o2 }]);
      this.request(s);
    };
  }
};
var le = class extends P {
  loginWithMagicLink(e) {
    let { email: t, showUI: r2 = true, redirectURI: o2 } = e, s = m2(this.sdk.testMode ? u.LoginWithMagicLinkTestMode : u.LoginWithMagicLink, [{ email: t, showUI: r2, redirectURI: o2 }]);
    return this.request(s);
  }
  loginWithSMS(e) {
    let { phoneNumber: t } = e, r2 = m2(this.sdk.testMode ? u.LoginWithSmsTestMode : u.LoginWithSms, [{ phoneNumber: t, showUI: true }]);
    return this.request(r2);
  }
  loginWithEmailOTP(e) {
    let { email: t, showUI: r2 } = e, o2 = m2(this.sdk.testMode ? u.LoginWithEmailOTPTestMode : u.LoginWithEmailOTP, [{ email: t, showUI: r2 }]);
    if (!r2) {
      let s = this.request(o2);
      return s && s.on("otp-input-sent", (a2) => {
        this.createIntermediaryEvent("verify-email-otp", o2.id)(a2);
      }), s;
    }
    return this.request(o2);
  }
  loginWithCredential(e) {
    let t = e != null ? e : "";
    if (!e && E.platform === "web") {
      t = window.location.search;
      let o2 = window.location.origin + window.location.pathname;
      window.history.replaceState(null, "", o2);
    }
    let r2 = m2(this.sdk.testMode ? u.LoginWithCredentialTestMode : u.LoginWithCredential, [t]);
    return this.request(r2);
  }
};
var H = {};
Nt(H, { clear: () => Ln, getItem: () => D, iterate: () => _n, key: () => On, keys: () => Cn, length: () => Sn, removeItem: () => ue, setItem: () => G });
var pe;
function C(n) {
  return (...e) => x(this, null, function* () {
    return pe || (pe = yield E.configureStorage()), yield pe.ready(), pe[n](...e);
  });
}
var D = C("getItem");
var G = C("setItem");
var ue = C("removeItem");
var Ln = C("clear");
var Sn = C("length");
var On = C("key");
var Cn = C("keys");
var _n = C("iterate");
function dt() {
  let n = window.crypto.getRandomValues(new Uint8Array(16));
  n[6] = n[6] & 15 | 64, n[8] = n[8] & 191 | 128;
  let e = "";
  return e += n[0].toString(16), e += n[1].toString(16), e += n[2].toString(16), e += n[3].toString(16), e += "-", e += n[4].toString(16), e += n[5].toString(16), e += "-", e += n[6].toString(16), e += n[7].toString(16), e += "-", e += n[8].toString(16), e += n[9].toString(16), e += "-", e += n[10].toString(16), e += n[11].toString(16), e += n[12].toString(16), e += n[13].toString(16), e += n[14].toString(16), e += n[15].toString(16), e;
}
var Me = "STORE_KEY_PRIVATE_KEY";
var de = "STORE_KEY_PUBLIC_JWK";
var Ne = "ECDSA";
var Et = "P-256";
var Dn = { name: Ne, namedCurve: Et };
var kn = { name: Ne, namedCurve: Et };
function me() {
  ue(de), ue(Me);
}
function ht() {
  return x(this, null, function* () {
    let n = yield qn();
    if (!n) {
      console.info("unable to create public key or webcrypto is unsupported");
      return;
    }
    let { subtle: e } = window.crypto, t = yield D(Me);
    if (!t || !e) {
      console.info("unable to find private key or webcrypto unsupported");
      return;
    }
    let r2 = { iat: Math.floor(new Date().getTime() / 1e3), jti: dt() }, o2 = { typ: "dpop+jwt", alg: "ES256", jwk: n }, s = { protected: mt(JSON.stringify(o2)), claims: mt(JSON.stringify(r2)) }, a2 = Gn(`${s.protected}.${s.claims}`), i = { name: Ne, hash: { name: "SHA-256" } }, c2 = Fn(new Uint8Array(yield e.sign(i, t, a2)));
    return `${s.protected}.${s.claims}.${c2}`;
  });
}
function qn() {
  return x(this, null, function* () {
    if (!Un()) {
      console.info("webcrypto is not supported");
      return;
    }
    return (yield D(de)) || (yield Jn()), D(de);
  });
}
function Jn() {
  return x(this, null, function* () {
    let n = null, { subtle: e } = window.crypto, t = yield e.generateKey(Dn, true, ["sign"]), r2 = yield e.exportKey("jwk", t.privateKey);
    n = yield e.exportKey("jwk", t.publicKey);
    let o2 = yield e.importKey("jwk", r2, kn, false, ["sign"]);
    yield G(Me, o2), yield G(de, n);
  });
}
function Un() {
  let n = typeof window != "undefined" && !!window.crypto, e = n && !!window.crypto.subtle;
  return n && e;
}
function mt(n) {
  return ft(Kn(n));
}
function Gn(n) {
  return new TextEncoder().encode(n);
}
function ft(n) {
  return btoa(n).replace(/\+/g, "-").replace(/\//g, "_").replace(/=+/g, "");
}
function Kn(n) {
  return encodeURIComponent(n).replace(/%([0-9A-F]{2})/g, (t, r2) => String.fromCharCode(parseInt(r2, 16)));
}
function Fn(n) {
  let e = "";
  return n.forEach((t) => {
    e += String.fromCharCode(t);
  }), ft(e);
}
var Ee = class extends P {
  getIdToken(e) {
    let t = m2(this.sdk.testMode ? u.GetIdTokenTestMode : u.GetIdToken, [e]);
    return this.request(t);
  }
  generateIdToken(e) {
    let t = m2(this.sdk.testMode ? u.GenerateIdTokenTestMode : u.GenerateIdToken, [e]);
    return this.request(t);
  }
  getMetadata() {
    let e = m2(this.sdk.testMode ? u.GetMetadataTestMode : u.GetMetadata);
    return this.request(e);
  }
  updateEmail(e) {
    let { email: t, showUI: r2 = true } = e, o2 = m2(this.sdk.testMode ? u.UpdateEmailTestMode : u.UpdateEmail, [{ email: t, showUI: r2 }]);
    return this.request(o2);
  }
  isLoggedIn() {
    let e = m2(this.sdk.testMode ? u.IsLoggedInTestMode : u.IsLoggedIn);
    return this.request(e);
  }
  logout() {
    me();
    let e = m2(this.sdk.testMode ? u.LogoutTestMode : u.Logout);
    return this.request(e);
  }
  showSettings() {
    let e = m2(this.sdk.testMode ? u.UserSettingsTestMode : u.UserSettings);
    return this.request(e);
  }
  updatePhoneNumber() {
    let e = m2(this.sdk.testMode ? u.UpdatePhoneNumberTestMode : u.UpdatePhoneNumber);
    return this.request(e);
  }
  recoverAccount(e) {
    let t = m2(this.sdk.testMode ? u.RecoverAccountTestMode : u.RecoverAccount, [e]);
    return this.request(t);
  }
};
var he = class extends P {
  connectWithUI() {
    let e = m2(u.RequestAccounts);
    return this.request(e);
  }
  showUI() {
    let e = m2(u.ShowUI);
    return this.request(e);
  }
  getInfo() {
    let e = m2(u.GetInfo);
    return this.request(e);
  }
  requestUserInfoWithUI(e) {
    let t = m2(u.RequestUserInfoWithUI, e ? [e] : []);
    return this.request(t);
  }
  disconnect() {
    me();
    let e = m2(u.Disconnect);
    return this.request(e);
  }
};
var { createBoundEmitterMethod: fe, createChainingEmitterMethod: K } = ae();
var ye = class extends P {
  constructor() {
    super(...arguments);
    this.isMagic = true;
    this.on = K("on", this);
    this.once = K("once", this);
    this.addListener = K("addListener", this);
    this.off = K("off", this);
    this.removeListener = K("removeListener", this);
    this.removeAllListeners = K("removeAllListeners", this);
    this.emit = fe("emit");
    this.eventNames = fe("eventNames");
    this.listeners = fe("listeners");
    this.listenerCount = fe("listenerCount");
  }
  sendAsync(t, r2) {
    if (!r2)
      throw nt({ procedure: "Magic.rpcProvider.sendAsync", argument: 1, expected: "function", received: r2 === null ? "null" : typeof r2 });
    if (Array.isArray(t))
      this.overlay.post(r.MAGIC_HANDLE_REQUEST, t.map((o2) => {
        let s = _(o2);
        return this.prefixPayloadMethodForTestMode(s), s;
      })).then((o2) => {
        r2(null, o2.map((s) => _e(Z({}, s.payload), { error: s.hasError ? new N(s.payload.error) : null })));
      });
    else {
      let o2 = _(t);
      this.prefixPayloadMethodForTestMode(o2), this.overlay.post(r.MAGIC_HANDLE_REQUEST, o2).then((s) => {
        r2(s.hasError ? new N(s.payload.error) : null, s.payload);
      });
    }
  }
  send(t, r2) {
    if (typeof t == "string") {
      let s = m2(t, Array.isArray(r2) ? r2 : []);
      return this.request(s);
    }
    if (Array.isArray(t) || !!r2) {
      this.sendAsync(t, r2);
      return;
    }
    let o2 = rt();
    return o2.log(), new S(t).applyError({ code: -32603, message: o2.rawMessage }).payload;
  }
  enable() {
    let t = m2("eth_accounts");
    return this.request(t);
  }
  request(t) {
    return this.prefixPayloadMethodForTestMode(t), super.request(t);
  }
  prefixPayloadMethodForTestMode(t) {
    let r2 = "testMode/eth/";
    this.sdk.testMode && (t.method = `${r2}${t.method}`);
  }
};
function we(n, e) {
  return e ? new URL(n, e) : new URL(n);
}
var gt = ["request", "overlay", "sdk"];
function jn(n) {
  let e = Object.getPrototypeOf(n), t = [e];
  for (; e !== P.prototype; )
    e = Object.getPrototypeOf(e), t.push(e);
  return t;
}
var ge = class extends P {
  constructor() {
    super(void 0);
    this.__sdk_access_field_descriptors__ = /* @__PURE__ */ new Map();
    this.__is_initialized__ = false;
    this.utils = { createPromiEvent: ce, isPromiEvent: ut, encodeJSON: ne, decodeJSON: He, createJsonRpcRequestPayload: m2, standardizeJsonRpcRequestPayload: _, storage: H };
    let t = [this, ...jn(this)];
    gt.forEach((r2) => {
      let o2 = t.map((c2) => Object.getOwnPropertyDescriptor(c2, r2)), s = o2.findIndex((c2) => !!c2), a2 = s > 0, i = o2[s];
      i && (this.__sdk_access_field_descriptors__.set(r2, { descriptor: i, isPrototypeField: a2 }), Object.defineProperty(this, r2, { configurable: true, get: () => {
        throw et(r2);
      } }));
    });
  }
  init(t) {
    this.__is_initialized__ || (gt.forEach((r2) => {
      if (this.__sdk_access_field_descriptors__.has(r2)) {
        let { descriptor: o2, isPrototypeField: s } = this.__sdk_access_field_descriptors__.get(r2);
        s ? delete this[r2] : Object.defineProperty(this, r2, o2);
      }
    }), this.sdk = t, this.__is_initialized__ = true);
  }
  createDeprecationWarning(t) {
    let { method: r2, removalVersion: o2, useInstead: s } = t, a2 = s ? ` Use \`${s}\` instead.` : "", i = `\`${r2}\` will be removed from this Extension in version \`${o2}\`.${a2}`;
    return new X(this, "DEPRECATION_NOTICE", i);
  }
  createWarning(t, r2) {
    return new X(this, t, r2);
  }
  createError(t, r2, o2) {
    return new J(this, t, r2, o2);
  }
};
var Ae = class extends ge {
};
var w = class extends ge {
};
w.Internal = Ae, w.Anonymous = "anonymous extension";
function Rt(n) {
  return n.compat && n.compat[E.sdkName] != null ? typeof n.compat[E.sdkName] == "string" ? Xe(Be(E.version), n.compat[E.sdkName]) : !!n.compat[E.sdkName] : true;
}
function Wn(n) {
  var o2;
  let e = (o2 = n == null ? void 0 : n.extensions) != null ? o2 : [], t = {}, r2 = [];
  if (Array.isArray(e) ? e.forEach((s) => {
    Rt(s) ? (s.init(this), (s.name || s.name !== w.Anonymous) && (this[s.name] = s), s instanceof w.Internal && (se(s.config) || (t[s.name] = s.config))) : r2.push(s);
  }) : Object.keys(e).forEach((s) => {
    if (Rt(e[s])) {
      e[s].init(this);
      let a2 = e[s];
      this[s] = a2, a2 instanceof w.Internal && (se(a2.config) || (t[e[s].name] = a2.config));
    } else
      r2.push(e[s]);
  }), r2.length)
    throw tt(r2);
  return t;
}
var z = class {
  constructor(e, t) {
    this.apiKey = e;
    var a2;
    if (!e)
      throw Ze();
    E.platform === "react-native" && (t == null ? void 0 : t.endpoint) && st().log();
    let { defaultEndpoint: r2, version: o2 } = E;
    this.testMode = !!(t != null && t.testMode), this.endpoint = we((a2 = t == null ? void 0 : t.endpoint) != null ? a2 : r2).origin, this.auth = new le(this), this.user = new Ee(this), this.wallet = new he(this), this.rpcProvider = new ye(this);
    let s = Wn.call(this, t);
    this.parameters = ne(Z({ API_KEY: this.apiKey, DOMAIN_ORIGIN: window.location ? window.location.origin : "", ETH_NETWORK: t == null ? void 0 : t.network, host: we(this.endpoint).host, sdk: Ye[E.sdkName], version: o2, ext: se(s) ? void 0 : s, locale: (t == null ? void 0 : t.locale) || "en_US" }, E.bundleId ? { bundleId: E.bundleId } : {}));
  }
  get overlay() {
    if (!z.__overlays__.has(this.parameters)) {
      let e = new E.ViewController(this.endpoint, this.parameters);
      e.init(), z.__overlays__.set(this.parameters, e);
    }
    return z.__overlays__.get(this.parameters);
  }
  preload() {
    return x(this, null, function* () {
      yield this.overlay.ready;
    });
  }
};
var Re = z;
Re.__overlays__ = /* @__PURE__ */ new Map();
function Xn(n, e) {
  return e && Array.isArray(n) ? n.find((t) => t.id === e) : n;
}
function Bn(n, e) {
  var o2;
  let t = (o2 = e.data.response) == null ? void 0 : o2.id, r2 = Xn(n, t);
  if (t && r2) {
    let s = new S(r2).applyResult(e.data.response.result).applyError(e.data.response.error);
    return { id: t, response: s };
  }
  return {};
}
function Hn(n, e) {
  return x(this, null, function* () {
    let t = yield D("rt"), r2;
    if (E.platform === "web")
      try {
        r2 = yield ht();
      } catch (o2) {
        console.error("webcrypto error", o2);
      }
    return r2 ? t ? { msgType: n, payload: e, jwt: r2, rt: t } : { msgType: n, payload: e, jwt: r2 } : { msgType: n, payload: e };
  });
}
function Vn(n) {
  return x(this, null, function* () {
    !n.data.rt || (yield G("rt", n.data.rt));
  });
}
var Le = class {
  constructor(e, t) {
    this.endpoint = e;
    this.parameters = t;
    this.messageHandlers = /* @__PURE__ */ new Set();
    this.ready = this.waitForReady(), this.listen();
  }
  post(e, t) {
    return x(this, null, function* () {
      return $e((r2) => x(this, null, function* () {
        yield this.ready;
        let o2 = [], s = Array.isArray(t) ? t.map((p2) => p2.id) : [], a2 = yield Hn(`${e}-${this.parameters}`, t);
        yield this._post(a2);
        let i = (p2) => (l) => {
          let { id: u2, response: I } = Bn(t, l);
          Vn(l), u2 && I && Array.isArray(t) && s.includes(u2) ? (o2.push(I), o2.length === t.length && (p2(), r2(o2))) : u2 && I && !Array.isArray(t) && u2 === t.id && (p2(), r2(I));
        }, c2 = this.on(o.MAGIC_HANDLE_RESPONSE, i(() => c2()));
      }));
    });
  }
  on(e, t) {
    let r2 = t.bind(window), o2 = (s) => {
      s.data.msgType === `${e}-${this.parameters}` && r2(s);
    };
    return this.messageHandlers.add(o2), () => this.messageHandlers.delete(o2);
  }
  waitForReady() {
    return new Promise((e) => {
      this.on(o.MAGIC_OVERLAY_READY, () => e());
    });
  }
  listen() {
    this.on(o.MAGIC_HIDE_OVERLAY, () => {
      this.hideOverlay();
    }), this.on(o.MAGIC_SHOW_OVERLAY, () => {
      this.showOverlay();
    });
  }
};

// node_modules/magic-sdk/dist/es/index.mjs
var Zr = Object.create;
var Je2 = Object.defineProperty;
var qr = Object.getOwnPropertyDescriptor;
var kr = Object.getOwnPropertyNames;
var et2 = Object.getPrototypeOf;
var rt2 = Object.prototype.hasOwnProperty;
var ve = ((b2) => typeof __require != "undefined" ? __require : typeof Proxy != "undefined" ? new Proxy(b2, { get: (A, R) => (typeof __require != "undefined" ? __require : A)[R] }) : b2)(function(b2) {
  if (typeof __require != "undefined")
    return __require.apply(this, arguments);
  throw new Error('Dynamic require of "' + b2 + '" is not supported');
});
var $e2 = (b2, A) => () => (A || b2((A = { exports: {} }).exports, A), A.exports);
var tt2 = (b2, A, R, L2) => {
  if (A && typeof A == "object" || typeof A == "function")
    for (let D2 of kr(A))
      !rt2.call(b2, D2) && D2 !== R && Je2(b2, D2, { get: () => A[D2], enumerable: !(L2 = qr(A, D2)) || L2.enumerable });
  return b2;
};
var Ze2 = (b2, A, R) => (R = b2 != null ? Zr(et2(b2)) : {}, tt2(A || !b2 || !b2.__esModule ? Je2(R, "default", { value: b2, enumerable: true }) : R, b2));
var se2 = (b2, A, R) => new Promise((L2, D2) => {
  var X2 = (I) => {
    try {
      Y2(R.next(I));
    } catch (M2) {
      D2(M2);
    }
  }, P2 = (I) => {
    try {
      Y2(R.throw(I));
    } catch (M2) {
      D2(M2);
    }
  }, Y2 = (I) => I.done ? L2(I.value) : Promise.resolve(I.value).then(X2, P2);
  Y2((R = R.apply(b2, A)).next());
});
var ke2 = $e2((qe2, Ne2) => {
  (function(b2) {
    if (typeof qe2 == "object" && typeof Ne2 < "u")
      Ne2.exports = b2();
    else if (typeof define == "function" && define.amd)
      define([], b2);
    else {
      var A;
      typeof window < "u" ? A = window : typeof global < "u" ? A = global : typeof self < "u" ? A = self : A = this, A.localforage = b2();
    }
  })(function() {
    var b2, A, R;
    return function L2(D2, X2, P2) {
      function Y2(H2, $2) {
        if (!X2[H2]) {
          if (!D2[H2]) {
            var m3 = typeof ve == "function" && ve;
            if (!$2 && m3)
              return m3(H2, true);
            if (I)
              return I(H2, true);
            var _2 = new Error("Cannot find module '" + H2 + "'");
            throw _2.code = "MODULE_NOT_FOUND", _2;
          }
          var B = X2[H2] = { exports: {} };
          D2[H2][0].call(B.exports, function(z2) {
            var Z2 = D2[H2][1][z2];
            return Y2(Z2 || z2);
          }, B, B.exports, L2, D2, X2, P2);
        }
        return X2[H2].exports;
      }
      for (var I = typeof ve == "function" && ve, M2 = 0; M2 < P2.length; M2++)
        Y2(P2[M2]);
      return Y2;
    }({ 1: [function(L2, D2, X2) {
      (function(P2) {
        "use strict";
        var Y2 = P2.MutationObserver || P2.WebKitMutationObserver, I;
        if (Y2) {
          var M2 = 0, H2 = new Y2(z2), $2 = P2.document.createTextNode("");
          H2.observe($2, { characterData: true }), I = function() {
            $2.data = M2 = ++M2 % 2;
          };
        } else if (!P2.setImmediate && typeof P2.MessageChannel < "u") {
          var m3 = new P2.MessageChannel();
          m3.port1.onmessage = z2, I = function() {
            m3.port2.postMessage(0);
          };
        } else
          "document" in P2 && "onreadystatechange" in P2.document.createElement("script") ? I = function() {
            var F2 = P2.document.createElement("script");
            F2.onreadystatechange = function() {
              z2(), F2.onreadystatechange = null, F2.parentNode.removeChild(F2), F2 = null;
            }, P2.document.documentElement.appendChild(F2);
          } : I = function() {
            setTimeout(z2, 0);
          };
        var _2, B = [];
        function z2() {
          _2 = true;
          for (var F2, k2, U = B.length; U; ) {
            for (k2 = B, B = [], F2 = -1; ++F2 < U; )
              k2[F2]();
            U = B.length;
          }
          _2 = false;
        }
        D2.exports = Z2;
        function Z2(F2) {
          B.push(F2) === 1 && !_2 && I();
        }
      }).call(this, typeof global < "u" ? global : typeof self < "u" ? self : typeof window < "u" ? window : {});
    }, {}], 2: [function(L2, D2, X2) {
      "use strict";
      var P2 = L2(1);
      function Y2() {
      }
      var I = {}, M2 = ["REJECTED"], H2 = ["FULFILLED"], $2 = ["PENDING"];
      D2.exports = m3;
      function m3(h2) {
        if (typeof h2 != "function")
          throw new TypeError("resolver must be a function");
        this.state = $2, this.queue = [], this.outcome = void 0, h2 !== Y2 && Z2(this, h2);
      }
      m3.prototype.catch = function(h2) {
        return this.then(null, h2);
      }, m3.prototype.then = function(h2, N2) {
        if (typeof h2 != "function" && this.state === H2 || typeof N2 != "function" && this.state === M2)
          return this;
        var E2 = new this.constructor(Y2);
        if (this.state !== $2) {
          var O = this.state === H2 ? h2 : N2;
          B(E2, O, this.outcome);
        } else
          this.queue.push(new _2(E2, h2, N2));
        return E2;
      };
      function _2(h2, N2, E2) {
        this.promise = h2, typeof N2 == "function" && (this.onFulfilled = N2, this.callFulfilled = this.otherCallFulfilled), typeof E2 == "function" && (this.onRejected = E2, this.callRejected = this.otherCallRejected);
      }
      _2.prototype.callFulfilled = function(h2) {
        I.resolve(this.promise, h2);
      }, _2.prototype.otherCallFulfilled = function(h2) {
        B(this.promise, this.onFulfilled, h2);
      }, _2.prototype.callRejected = function(h2) {
        I.reject(this.promise, h2);
      }, _2.prototype.otherCallRejected = function(h2) {
        B(this.promise, this.onRejected, h2);
      };
      function B(h2, N2, E2) {
        P2(function() {
          var O;
          try {
            O = N2(E2);
          } catch (V) {
            return I.reject(h2, V);
          }
          O === h2 ? I.reject(h2, new TypeError("Cannot resolve promise with itself")) : I.resolve(h2, O);
        });
      }
      I.resolve = function(h2, N2) {
        var E2 = F2(z2, N2);
        if (E2.status === "error")
          return I.reject(h2, E2.value);
        var O = E2.value;
        if (O)
          Z2(h2, O);
        else {
          h2.state = H2, h2.outcome = N2;
          for (var V = -1, j2 = h2.queue.length; ++V < j2; )
            h2.queue[V].callFulfilled(N2);
        }
        return h2;
      }, I.reject = function(h2, N2) {
        h2.state = M2, h2.outcome = N2;
        for (var E2 = -1, O = h2.queue.length; ++E2 < O; )
          h2.queue[E2].callRejected(N2);
        return h2;
      };
      function z2(h2) {
        var N2 = h2 && h2.then;
        if (h2 && (typeof h2 == "object" || typeof h2 == "function") && typeof N2 == "function")
          return function() {
            N2.apply(h2, arguments);
          };
      }
      function Z2(h2, N2) {
        var E2 = false;
        function O(J2) {
          E2 || (E2 = true, I.reject(h2, J2));
        }
        function V(J2) {
          E2 || (E2 = true, I.resolve(h2, J2));
        }
        function j2() {
          N2(V, O);
        }
        var Q2 = F2(j2);
        Q2.status === "error" && O(Q2.value);
      }
      function F2(h2, N2) {
        var E2 = {};
        try {
          E2.value = h2(N2), E2.status = "success";
        } catch (O) {
          E2.status = "error", E2.value = O;
        }
        return E2;
      }
      m3.resolve = k2;
      function k2(h2) {
        return h2 instanceof this ? h2 : I.resolve(new this(Y2), h2);
      }
      m3.reject = U;
      function U(h2) {
        var N2 = new this(Y2);
        return I.reject(N2, h2);
      }
      m3.all = ae2;
      function ae2(h2) {
        var N2 = this;
        if (Object.prototype.toString.call(h2) !== "[object Array]")
          return this.reject(new TypeError("must be an array"));
        var E2 = h2.length, O = false;
        if (!E2)
          return this.resolve([]);
        for (var V = new Array(E2), j2 = 0, Q2 = -1, J2 = new this(Y2); ++Q2 < E2; )
          ee2(h2[Q2], Q2);
        return J2;
        function ee2(oe, a2) {
          N2.resolve(oe).then(s, function(v2) {
            O || (O = true, I.reject(J2, v2));
          });
          function s(v2) {
            V[a2] = v2, ++j2 === E2 && !O && (O = true, I.resolve(J2, V));
          }
        }
      }
      m3.race = re2;
      function re2(h2) {
        var N2 = this;
        if (Object.prototype.toString.call(h2) !== "[object Array]")
          return this.reject(new TypeError("must be an array"));
        var E2 = h2.length, O = false;
        if (!E2)
          return this.resolve([]);
        for (var V = -1, j2 = new this(Y2); ++V < E2; )
          Q2(h2[V]);
        return j2;
        function Q2(J2) {
          N2.resolve(J2).then(function(ee2) {
            O || (O = true, I.resolve(j2, ee2));
          }, function(ee2) {
            O || (O = true, I.reject(j2, ee2));
          });
        }
      }
    }, { 1: 1 }], 3: [function(L2, D2, X2) {
      (function(P2) {
        "use strict";
        typeof P2.Promise != "function" && (P2.Promise = L2(2));
      }).call(this, typeof global < "u" ? global : typeof self < "u" ? self : typeof window < "u" ? window : {});
    }, { 2: 2 }], 4: [function(L2, D2, X2) {
      "use strict";
      var P2 = typeof Symbol == "function" && typeof Symbol.iterator == "symbol" ? function(e) {
        return typeof e;
      } : function(e) {
        return e && typeof Symbol == "function" && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e;
      };
      function Y2(e, t) {
        if (!(e instanceof t))
          throw new TypeError("Cannot call a class as a function");
      }
      function I() {
        try {
          if (typeof indexedDB < "u")
            return indexedDB;
          if (typeof webkitIndexedDB < "u")
            return webkitIndexedDB;
          if (typeof mozIndexedDB < "u")
            return mozIndexedDB;
          if (typeof OIndexedDB < "u")
            return OIndexedDB;
          if (typeof msIndexedDB < "u")
            return msIndexedDB;
        } catch {
          return;
        }
      }
      var M2 = I();
      function H2() {
        try {
          if (!M2 || !M2.open)
            return false;
          var e = typeof openDatabase < "u" && /(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent) && !/Chrome/.test(navigator.userAgent) && !/BlackBerry/.test(navigator.platform), t = typeof fetch == "function" && fetch.toString().indexOf("[native code") !== -1;
          return (!e || t) && typeof indexedDB < "u" && typeof IDBKeyRange < "u";
        } catch {
          return false;
        }
      }
      function $2(e, t) {
        e = e || [], t = t || {};
        try {
          return new Blob(e, t);
        } catch (n) {
          if (n.name !== "TypeError")
            throw n;
          for (var r2 = typeof BlobBuilder < "u" ? BlobBuilder : typeof MSBlobBuilder < "u" ? MSBlobBuilder : typeof MozBlobBuilder < "u" ? MozBlobBuilder : WebKitBlobBuilder, o2 = new r2(), i = 0; i < e.length; i += 1)
            o2.append(e[i]);
          return o2.getBlob(t.type);
        }
      }
      typeof Promise > "u" && L2(3);
      var m3 = Promise;
      function _2(e, t) {
        t && e.then(function(r2) {
          t(null, r2);
        }, function(r2) {
          t(r2);
        });
      }
      function B(e, t, r2) {
        typeof t == "function" && e.then(t), typeof r2 == "function" && e.catch(r2);
      }
      function z2(e) {
        return typeof e != "string" && (console.warn(e + " used as a key, but it is not a string."), e = String(e)), e;
      }
      function Z2() {
        if (arguments.length && typeof arguments[arguments.length - 1] == "function")
          return arguments[arguments.length - 1];
      }
      var F2 = "local-forage-detect-blob-support", k2 = void 0, U = {}, ae2 = Object.prototype.toString, re2 = "readonly", h2 = "readwrite";
      function N2(e) {
        for (var t = e.length, r2 = new ArrayBuffer(t), o2 = new Uint8Array(r2), i = 0; i < t; i++)
          o2[i] = e.charCodeAt(i);
        return r2;
      }
      function E2(e) {
        return new m3(function(t) {
          var r2 = e.transaction(F2, h2), o2 = $2([""]);
          r2.objectStore(F2).put(o2, "key"), r2.onabort = function(i) {
            i.preventDefault(), i.stopPropagation(), t(false);
          }, r2.oncomplete = function() {
            var i = navigator.userAgent.match(/Chrome\/(\d+)/), n = navigator.userAgent.match(/Edge\//);
            t(n || !i || parseInt(i[1], 10) >= 43);
          };
        }).catch(function() {
          return false;
        });
      }
      function O(e) {
        return typeof k2 == "boolean" ? m3.resolve(k2) : E2(e).then(function(t) {
          return k2 = t, k2;
        });
      }
      function V(e) {
        var t = U[e.name], r2 = {};
        r2.promise = new m3(function(o2, i) {
          r2.resolve = o2, r2.reject = i;
        }), t.deferredOperations.push(r2), t.dbReady ? t.dbReady = t.dbReady.then(function() {
          return r2.promise;
        }) : t.dbReady = r2.promise;
      }
      function j2(e) {
        var t = U[e.name], r2 = t.deferredOperations.pop();
        if (r2)
          return r2.resolve(), r2.promise;
      }
      function Q2(e, t) {
        var r2 = U[e.name], o2 = r2.deferredOperations.pop();
        if (o2)
          return o2.reject(t), o2.promise;
      }
      function J2(e, t) {
        return new m3(function(r2, o2) {
          if (U[e.name] = U[e.name] || G2(), e.db)
            if (t)
              V(e), e.db.close();
            else
              return r2(e.db);
          var i = [e.name];
          t && i.push(e.version);
          var n = M2.open.apply(M2, i);
          t && (n.onupgradeneeded = function(f) {
            var u2 = n.result;
            try {
              u2.createObjectStore(e.storeName), f.oldVersion <= 1 && u2.createObjectStore(F2);
            } catch (c2) {
              if (c2.name === "ConstraintError")
                console.warn('The database "' + e.name + '" has been upgraded from version ' + f.oldVersion + " to version " + f.newVersion + ', but the storage "' + e.storeName + '" already exists.');
              else
                throw c2;
            }
          }), n.onerror = function(f) {
            f.preventDefault(), o2(n.error);
          }, n.onsuccess = function() {
            var f = n.result;
            f.onversionchange = function(u2) {
              u2.target.close();
            }, r2(f), j2(e);
          };
        });
      }
      function ee2(e) {
        return J2(e, false);
      }
      function oe(e) {
        return J2(e, true);
      }
      function a2(e, t) {
        if (!e.db)
          return true;
        var r2 = !e.db.objectStoreNames.contains(e.storeName), o2 = e.version < e.db.version, i = e.version > e.db.version;
        if (o2 && (e.version !== t && console.warn('The database "' + e.name + `" can't be downgraded from version ` + e.db.version + " to version " + e.version + "."), e.version = e.db.version), i || r2) {
          if (r2) {
            var n = e.db.version + 1;
            n > e.version && (e.version = n);
          }
          return true;
        }
        return false;
      }
      function s(e) {
        return new m3(function(t, r2) {
          var o2 = new FileReader();
          o2.onerror = r2, o2.onloadend = function(i) {
            var n = btoa(i.target.result || "");
            t({ __local_forage_encoded_blob: true, data: n, type: e.type });
          }, o2.readAsBinaryString(e);
        });
      }
      function v2(e) {
        var t = N2(atob(e.data));
        return $2([t], { type: e.type });
      }
      function p2(e) {
        return e && e.__local_forage_encoded_blob;
      }
      function g2(e) {
        var t = this, r2 = t._initReady().then(function() {
          var o2 = U[t._dbInfo.name];
          if (o2 && o2.dbReady)
            return o2.dbReady;
        });
        return B(r2, e, e), r2;
      }
      function w2(e) {
        V(e);
        for (var t = U[e.name], r2 = t.forages, o2 = 0; o2 < r2.length; o2++) {
          var i = r2[o2];
          i._dbInfo.db && (i._dbInfo.db.close(), i._dbInfo.db = null);
        }
        return e.db = null, ee2(e).then(function(n) {
          return e.db = n, a2(e) ? oe(e) : n;
        }).then(function(n) {
          e.db = t.db = n;
          for (var f = 0; f < r2.length; f++)
            r2[f]._dbInfo.db = n;
        }).catch(function(n) {
          throw Q2(e, n), n;
        });
      }
      function T(e, t, r2, o2) {
        o2 === void 0 && (o2 = 1);
        try {
          var i = e.db.transaction(e.storeName, t);
          r2(null, i);
        } catch (n) {
          if (o2 > 0 && (!e.db || n.name === "InvalidStateError" || n.name === "NotFoundError"))
            return m3.resolve().then(function() {
              if (!e.db || n.name === "NotFoundError" && !e.db.objectStoreNames.contains(e.storeName) && e.version <= e.db.version)
                return e.db && (e.version = e.db.version + 1), oe(e);
            }).then(function() {
              return w2(e).then(function() {
                T(e, t, r2, o2 - 1);
              });
            }).catch(r2);
          r2(n);
        }
      }
      function G2() {
        return { forages: [], db: null, dbReady: null, deferredOperations: [] };
      }
      function fe2(e) {
        var t = this, r2 = { db: null };
        if (e)
          for (var o2 in e)
            r2[o2] = e[o2];
        var i = U[r2.name];
        i || (i = G2(), U[r2.name] = i), i.forages.push(t), t._initReady || (t._initReady = t.ready, t.ready = g2);
        var n = [];
        function f() {
          return m3.resolve();
        }
        for (var u2 = 0; u2 < i.forages.length; u2++) {
          var c2 = i.forages[u2];
          c2 !== t && n.push(c2._initReady().catch(f));
        }
        var l = i.forages.slice(0);
        return m3.all(n).then(function() {
          return r2.db = i.db, ee2(r2);
        }).then(function(d2) {
          return r2.db = d2, a2(r2, t._defaultConfig.version) ? oe(r2) : d2;
        }).then(function(d2) {
          r2.db = i.db = d2, t._dbInfo = r2;
          for (var y2 = 0; y2 < l.length; y2++) {
            var S2 = l[y2];
            S2 !== t && (S2._dbInfo.db = r2.db, S2._dbInfo.version = r2.version);
          }
        });
      }
      function ie(e, t) {
        var r2 = this;
        e = z2(e);
        var o2 = new m3(function(i, n) {
          r2.ready().then(function() {
            T(r2._dbInfo, re2, function(f, u2) {
              if (f)
                return n(f);
              try {
                var c2 = u2.objectStore(r2._dbInfo.storeName), l = c2.get(e);
                l.onsuccess = function() {
                  var d2 = l.result;
                  d2 === void 0 && (d2 = null), p2(d2) && (d2 = v2(d2)), i(d2);
                }, l.onerror = function() {
                  n(l.error);
                };
              } catch (d2) {
                n(d2);
              }
            });
          }).catch(n);
        });
        return _2(o2, t), o2;
      }
      function ce2(e, t) {
        var r2 = this, o2 = new m3(function(i, n) {
          r2.ready().then(function() {
            T(r2._dbInfo, re2, function(f, u2) {
              if (f)
                return n(f);
              try {
                var c2 = u2.objectStore(r2._dbInfo.storeName), l = c2.openCursor(), d2 = 1;
                l.onsuccess = function() {
                  var y2 = l.result;
                  if (y2) {
                    var S2 = y2.value;
                    p2(S2) && (S2 = v2(S2));
                    var x2 = e(S2, y2.key, d2++);
                    x2 !== void 0 ? i(x2) : y2.continue();
                  } else
                    i();
                }, l.onerror = function() {
                  n(l.error);
                };
              } catch (y2) {
                n(y2);
              }
            });
          }).catch(n);
        });
        return _2(o2, t), o2;
      }
      function nr(e, t, r2) {
        var o2 = this;
        e = z2(e);
        var i = new m3(function(n, f) {
          var u2;
          o2.ready().then(function() {
            return u2 = o2._dbInfo, ae2.call(t) === "[object Blob]" ? O(u2.db).then(function(c2) {
              return c2 ? t : s(t);
            }) : t;
          }).then(function(c2) {
            T(o2._dbInfo, h2, function(l, d2) {
              if (l)
                return f(l);
              try {
                var y2 = d2.objectStore(o2._dbInfo.storeName);
                c2 === null && (c2 = void 0);
                var S2 = y2.put(c2, e);
                d2.oncomplete = function() {
                  c2 === void 0 && (c2 = null), n(c2);
                }, d2.onabort = d2.onerror = function() {
                  var x2 = S2.error ? S2.error : S2.transaction.error;
                  f(x2);
                };
              } catch (x2) {
                f(x2);
              }
            });
          }).catch(f);
        });
        return _2(i, r2), i;
      }
      function or(e, t) {
        var r2 = this;
        e = z2(e);
        var o2 = new m3(function(i, n) {
          r2.ready().then(function() {
            T(r2._dbInfo, h2, function(f, u2) {
              if (f)
                return n(f);
              try {
                var c2 = u2.objectStore(r2._dbInfo.storeName), l = c2.delete(e);
                u2.oncomplete = function() {
                  i();
                }, u2.onerror = function() {
                  n(l.error);
                }, u2.onabort = function() {
                  var d2 = l.error ? l.error : l.transaction.error;
                  n(d2);
                };
              } catch (d2) {
                n(d2);
              }
            });
          }).catch(n);
        });
        return _2(o2, t), o2;
      }
      function ir(e) {
        var t = this, r2 = new m3(function(o2, i) {
          t.ready().then(function() {
            T(t._dbInfo, h2, function(n, f) {
              if (n)
                return i(n);
              try {
                var u2 = f.objectStore(t._dbInfo.storeName), c2 = u2.clear();
                f.oncomplete = function() {
                  o2();
                }, f.onabort = f.onerror = function() {
                  var l = c2.error ? c2.error : c2.transaction.error;
                  i(l);
                };
              } catch (l) {
                i(l);
              }
            });
          }).catch(i);
        });
        return _2(r2, e), r2;
      }
      function ar(e) {
        var t = this, r2 = new m3(function(o2, i) {
          t.ready().then(function() {
            T(t._dbInfo, re2, function(n, f) {
              if (n)
                return i(n);
              try {
                var u2 = f.objectStore(t._dbInfo.storeName), c2 = u2.count();
                c2.onsuccess = function() {
                  o2(c2.result);
                }, c2.onerror = function() {
                  i(c2.error);
                };
              } catch (l) {
                i(l);
              }
            });
          }).catch(i);
        });
        return _2(r2, e), r2;
      }
      function fr(e, t) {
        var r2 = this, o2 = new m3(function(i, n) {
          if (e < 0) {
            i(null);
            return;
          }
          r2.ready().then(function() {
            T(r2._dbInfo, re2, function(f, u2) {
              if (f)
                return n(f);
              try {
                var c2 = u2.objectStore(r2._dbInfo.storeName), l = false, d2 = c2.openKeyCursor();
                d2.onsuccess = function() {
                  var y2 = d2.result;
                  if (!y2) {
                    i(null);
                    return;
                  }
                  e === 0 || l ? i(y2.key) : (l = true, y2.advance(e));
                }, d2.onerror = function() {
                  n(d2.error);
                };
              } catch (y2) {
                n(y2);
              }
            });
          }).catch(n);
        });
        return _2(o2, t), o2;
      }
      function ur2(e) {
        var t = this, r2 = new m3(function(o2, i) {
          t.ready().then(function() {
            T(t._dbInfo, re2, function(n, f) {
              if (n)
                return i(n);
              try {
                var u2 = f.objectStore(t._dbInfo.storeName), c2 = u2.openKeyCursor(), l = [];
                c2.onsuccess = function() {
                  var d2 = c2.result;
                  if (!d2) {
                    o2(l);
                    return;
                  }
                  l.push(d2.key), d2.continue();
                }, c2.onerror = function() {
                  i(c2.error);
                };
              } catch (d2) {
                i(d2);
              }
            });
          }).catch(i);
        });
        return _2(r2, e), r2;
      }
      function sr(e, t) {
        t = Z2.apply(this, arguments);
        var r2 = this.config();
        e = typeof e != "function" && e || {}, e.name || (e.name = e.name || r2.name, e.storeName = e.storeName || r2.storeName);
        var o2 = this, i;
        if (!e.name)
          i = m3.reject("Invalid arguments");
        else {
          var n = e.name === r2.name && o2._dbInfo.db, f = n ? m3.resolve(o2._dbInfo.db) : ee2(e).then(function(u2) {
            var c2 = U[e.name], l = c2.forages;
            c2.db = u2;
            for (var d2 = 0; d2 < l.length; d2++)
              l[d2]._dbInfo.db = u2;
            return u2;
          });
          e.storeName ? i = f.then(function(u2) {
            if (!!u2.objectStoreNames.contains(e.storeName)) {
              var c2 = u2.version + 1;
              V(e);
              var l = U[e.name], d2 = l.forages;
              u2.close();
              for (var y2 = 0; y2 < d2.length; y2++) {
                var S2 = d2[y2];
                S2._dbInfo.db = null, S2._dbInfo.version = c2;
              }
              var x2 = new m3(function(C2, K2) {
                var W2 = M2.open(e.name, c2);
                W2.onerror = function(q2) {
                  var de2 = W2.result;
                  de2.close(), K2(q2);
                }, W2.onupgradeneeded = function() {
                  var q2 = W2.result;
                  q2.deleteObjectStore(e.storeName);
                }, W2.onsuccess = function() {
                  var q2 = W2.result;
                  q2.close(), C2(q2);
                };
              });
              return x2.then(function(C2) {
                l.db = C2;
                for (var K2 = 0; K2 < d2.length; K2++) {
                  var W2 = d2[K2];
                  W2._dbInfo.db = C2, j2(W2._dbInfo);
                }
              }).catch(function(C2) {
                throw (Q2(e, C2) || m3.resolve()).catch(function() {
                }), C2;
              });
            }
          }) : i = f.then(function(u2) {
            V(e);
            var c2 = U[e.name], l = c2.forages;
            u2.close();
            for (var d2 = 0; d2 < l.length; d2++) {
              var y2 = l[d2];
              y2._dbInfo.db = null;
            }
            var S2 = new m3(function(x2, C2) {
              var K2 = M2.deleteDatabase(e.name);
              K2.onerror = function() {
                var W2 = K2.result;
                W2 && W2.close(), C2(K2.error);
              }, K2.onblocked = function() {
                console.warn('dropInstance blocked for database "' + e.name + '" until all open connections are closed');
              }, K2.onsuccess = function() {
                var W2 = K2.result;
                W2 && W2.close(), x2(W2);
              };
            });
            return S2.then(function(x2) {
              c2.db = x2;
              for (var C2 = 0; C2 < l.length; C2++) {
                var K2 = l[C2];
                j2(K2._dbInfo);
              }
            }).catch(function(x2) {
              throw (Q2(e, x2) || m3.resolve()).catch(function() {
              }), x2;
            });
          });
        }
        return _2(i, t), i;
      }
      var cr = { _driver: "asyncStorage", _initStorage: fe2, _support: H2(), iterate: ce2, getItem: ie, setItem: nr, removeItem: or, clear: ir, length: ar, key: fr, keys: ur2, dropInstance: sr };
      function lr() {
        return typeof openDatabase == "function";
      }
      var te2 = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/", dr = "~~local_forage_type~", Be2 = /^~~local_forage_type~([^~]+)~/, he2 = "__lfsc__:", be2 = he2.length, _e2 = "arbf", we2 = "blob", xe2 = "si08", Oe2 = "ui08", Ce2 = "uic8", Le2 = "si16", Pe = "si32", Me2 = "ur16", Fe2 = "ui32", Ue2 = "fl32", Ye2 = "fl64", ze2 = be2 + _e2.length, We2 = Object.prototype.toString;
      function Ke2(e) {
        var t = e.length * 0.75, r2 = e.length, o2, i = 0, n, f, u2, c2;
        e[e.length - 1] === "=" && (t--, e[e.length - 2] === "=" && t--);
        var l = new ArrayBuffer(t), d2 = new Uint8Array(l);
        for (o2 = 0; o2 < r2; o2 += 4)
          n = te2.indexOf(e[o2]), f = te2.indexOf(e[o2 + 1]), u2 = te2.indexOf(e[o2 + 2]), c2 = te2.indexOf(e[o2 + 3]), d2[i++] = n << 2 | f >> 4, d2[i++] = (f & 15) << 4 | u2 >> 2, d2[i++] = (u2 & 3) << 6 | c2 & 63;
        return l;
      }
      function Ee2(e) {
        var t = new Uint8Array(e), r2 = "", o2;
        for (o2 = 0; o2 < t.length; o2 += 3)
          r2 += te2[t[o2] >> 2], r2 += te2[(t[o2] & 3) << 4 | t[o2 + 1] >> 4], r2 += te2[(t[o2 + 1] & 15) << 2 | t[o2 + 2] >> 6], r2 += te2[t[o2 + 2] & 63];
        return t.length % 3 === 2 ? r2 = r2.substring(0, r2.length - 1) + "=" : t.length % 3 === 1 && (r2 = r2.substring(0, r2.length - 2) + "=="), r2;
      }
      function vr(e, t) {
        var r2 = "";
        if (e && (r2 = We2.call(e)), e && (r2 === "[object ArrayBuffer]" || e.buffer && We2.call(e.buffer) === "[object ArrayBuffer]")) {
          var o2, i = he2;
          e instanceof ArrayBuffer ? (o2 = e, i += _e2) : (o2 = e.buffer, r2 === "[object Int8Array]" ? i += xe2 : r2 === "[object Uint8Array]" ? i += Oe2 : r2 === "[object Uint8ClampedArray]" ? i += Ce2 : r2 === "[object Int16Array]" ? i += Le2 : r2 === "[object Uint16Array]" ? i += Me2 : r2 === "[object Int32Array]" ? i += Pe : r2 === "[object Uint32Array]" ? i += Fe2 : r2 === "[object Float32Array]" ? i += Ue2 : r2 === "[object Float64Array]" ? i += Ye2 : t(new Error("Failed to get type for BinaryArray"))), t(i + Ee2(o2));
        } else if (r2 === "[object Blob]") {
          var n = new FileReader();
          n.onload = function() {
            var f = dr + e.type + "~" + Ee2(this.result);
            t(he2 + we2 + f);
          }, n.readAsArrayBuffer(e);
        } else
          try {
            t(JSON.stringify(e));
          } catch (f) {
            console.error("Couldn't convert value into a JSON string: ", e), t(null, f);
          }
      }
      function hr(e) {
        if (e.substring(0, be2) !== he2)
          return JSON.parse(e);
        var t = e.substring(ze2), r2 = e.substring(be2, ze2), o2;
        if (r2 === we2 && Be2.test(t)) {
          var i = t.match(Be2);
          o2 = i[1], t = t.substring(i[0].length);
        }
        var n = Ke2(t);
        switch (r2) {
          case _e2:
            return n;
          case we2:
            return $2([n], { type: o2 });
          case xe2:
            return new Int8Array(n);
          case Oe2:
            return new Uint8Array(n);
          case Ce2:
            return new Uint8ClampedArray(n);
          case Le2:
            return new Int16Array(n);
          case Me2:
            return new Uint16Array(n);
          case Pe:
            return new Int32Array(n);
          case Fe2:
            return new Uint32Array(n);
          case Ue2:
            return new Float32Array(n);
          case Ye2:
            return new Float64Array(n);
          default:
            throw new Error("Unkown type: " + r2);
        }
      }
      var Ie2 = { serialize: vr, deserialize: hr, stringToBuffer: Ke2, bufferToString: Ee2 };
      function He2(e, t, r2, o2) {
        e.executeSql("CREATE TABLE IF NOT EXISTS " + t.storeName + " (id INTEGER PRIMARY KEY, key unique, value)", [], r2, o2);
      }
      function mr(e) {
        var t = this, r2 = { db: null };
        if (e)
          for (var o2 in e)
            r2[o2] = typeof e[o2] != "string" ? e[o2].toString() : e[o2];
        var i = new m3(function(n, f) {
          try {
            r2.db = openDatabase(r2.name, String(r2.version), r2.description, r2.size);
          } catch (u2) {
            return f(u2);
          }
          r2.db.transaction(function(u2) {
            He2(u2, r2, function() {
              t._dbInfo = r2, n();
            }, function(c2, l) {
              f(l);
            });
          }, f);
        });
        return r2.serializer = Ie2, i;
      }
      function ne2(e, t, r2, o2, i, n) {
        e.executeSql(r2, o2, i, function(f, u2) {
          u2.code === u2.SYNTAX_ERR ? f.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?", [t.storeName], function(c2, l) {
            l.rows.length ? n(c2, u2) : He2(c2, t, function() {
              c2.executeSql(r2, o2, i, n);
            }, n);
          }, n) : n(f, u2);
        }, n);
      }
      function yr(e, t) {
        var r2 = this;
        e = z2(e);
        var o2 = new m3(function(i, n) {
          r2.ready().then(function() {
            var f = r2._dbInfo;
            f.db.transaction(function(u2) {
              ne2(u2, f, "SELECT * FROM " + f.storeName + " WHERE key = ? LIMIT 1", [e], function(c2, l) {
                var d2 = l.rows.length ? l.rows.item(0).value : null;
                d2 && (d2 = f.serializer.deserialize(d2)), i(d2);
              }, function(c2, l) {
                n(l);
              });
            });
          }).catch(n);
        });
        return _2(o2, t), o2;
      }
      function pr2(e, t) {
        var r2 = this, o2 = new m3(function(i, n) {
          r2.ready().then(function() {
            var f = r2._dbInfo;
            f.db.transaction(function(u2) {
              ne2(u2, f, "SELECT * FROM " + f.storeName, [], function(c2, l) {
                for (var d2 = l.rows, y2 = d2.length, S2 = 0; S2 < y2; S2++) {
                  var x2 = d2.item(S2), C2 = x2.value;
                  if (C2 && (C2 = f.serializer.deserialize(C2)), C2 = e(C2, x2.key, S2 + 1), C2 !== void 0) {
                    i(C2);
                    return;
                  }
                }
                i();
              }, function(c2, l) {
                n(l);
              });
            });
          }).catch(n);
        });
        return _2(o2, t), o2;
      }
      function Ve2(e, t, r2, o2) {
        var i = this;
        e = z2(e);
        var n = new m3(function(f, u2) {
          i.ready().then(function() {
            t === void 0 && (t = null);
            var c2 = t, l = i._dbInfo;
            l.serializer.serialize(t, function(d2, y2) {
              y2 ? u2(y2) : l.db.transaction(function(S2) {
                ne2(S2, l, "INSERT OR REPLACE INTO " + l.storeName + " (key, value) VALUES (?, ?)", [e, d2], function() {
                  f(c2);
                }, function(x2, C2) {
                  u2(C2);
                });
              }, function(S2) {
                if (S2.code === S2.QUOTA_ERR) {
                  if (o2 > 0) {
                    f(Ve2.apply(i, [e, c2, r2, o2 - 1]));
                    return;
                  }
                  u2(S2);
                }
              });
            });
          }).catch(u2);
        });
        return _2(n, r2), n;
      }
      function gr(e, t, r2) {
        return Ve2.apply(this, [e, t, r2, 1]);
      }
      function br(e, t) {
        var r2 = this;
        e = z2(e);
        var o2 = new m3(function(i, n) {
          r2.ready().then(function() {
            var f = r2._dbInfo;
            f.db.transaction(function(u2) {
              ne2(u2, f, "DELETE FROM " + f.storeName + " WHERE key = ?", [e], function() {
                i();
              }, function(c2, l) {
                n(l);
              });
            });
          }).catch(n);
        });
        return _2(o2, t), o2;
      }
      function _r(e) {
        var t = this, r2 = new m3(function(o2, i) {
          t.ready().then(function() {
            var n = t._dbInfo;
            n.db.transaction(function(f) {
              ne2(f, n, "DELETE FROM " + n.storeName, [], function() {
                o2();
              }, function(u2, c2) {
                i(c2);
              });
            });
          }).catch(i);
        });
        return _2(r2, e), r2;
      }
      function wr(e) {
        var t = this, r2 = new m3(function(o2, i) {
          t.ready().then(function() {
            var n = t._dbInfo;
            n.db.transaction(function(f) {
              ne2(f, n, "SELECT COUNT(key) as c FROM " + n.storeName, [], function(u2, c2) {
                var l = c2.rows.item(0).c;
                o2(l);
              }, function(u2, c2) {
                i(c2);
              });
            });
          }).catch(i);
        });
        return _2(r2, e), r2;
      }
      function Er(e, t) {
        var r2 = this, o2 = new m3(function(i, n) {
          r2.ready().then(function() {
            var f = r2._dbInfo;
            f.db.transaction(function(u2) {
              ne2(u2, f, "SELECT key FROM " + f.storeName + " WHERE id = ? LIMIT 1", [e + 1], function(c2, l) {
                var d2 = l.rows.length ? l.rows.item(0).key : null;
                i(d2);
              }, function(c2, l) {
                n(l);
              });
            });
          }).catch(n);
        });
        return _2(o2, t), o2;
      }
      function Ir(e) {
        var t = this, r2 = new m3(function(o2, i) {
          t.ready().then(function() {
            var n = t._dbInfo;
            n.db.transaction(function(f) {
              ne2(f, n, "SELECT key FROM " + n.storeName, [], function(u2, c2) {
                for (var l = [], d2 = 0; d2 < c2.rows.length; d2++)
                  l.push(c2.rows.item(d2).key);
                o2(l);
              }, function(u2, c2) {
                i(c2);
              });
            });
          }).catch(i);
        });
        return _2(r2, e), r2;
      }
      function Sr(e) {
        return new m3(function(t, r2) {
          e.transaction(function(o2) {
            o2.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'", [], function(i, n) {
              for (var f = [], u2 = 0; u2 < n.rows.length; u2++)
                f.push(n.rows.item(u2).name);
              t({ db: e, storeNames: f });
            }, function(i, n) {
              r2(n);
            });
          }, function(o2) {
            r2(o2);
          });
        });
      }
      function Ar(e, t) {
        t = Z2.apply(this, arguments);
        var r2 = this.config();
        e = typeof e != "function" && e || {}, e.name || (e.name = e.name || r2.name, e.storeName = e.storeName || r2.storeName);
        var o2 = this, i;
        return e.name ? i = new m3(function(n) {
          var f;
          e.name === r2.name ? f = o2._dbInfo.db : f = openDatabase(e.name, "", "", 0), e.storeName ? n({ db: f, storeNames: [e.storeName] }) : n(Sr(f));
        }).then(function(n) {
          return new m3(function(f, u2) {
            n.db.transaction(function(c2) {
              function l(x2) {
                return new m3(function(C2, K2) {
                  c2.executeSql("DROP TABLE IF EXISTS " + x2, [], function() {
                    C2();
                  }, function(W2, q2) {
                    K2(q2);
                  });
                });
              }
              for (var d2 = [], y2 = 0, S2 = n.storeNames.length; y2 < S2; y2++)
                d2.push(l(n.storeNames[y2]));
              m3.all(d2).then(function() {
                f();
              }).catch(function(x2) {
                u2(x2);
              });
            }, function(c2) {
              u2(c2);
            });
          });
        }) : i = m3.reject("Invalid arguments"), _2(i, t), i;
      }
      var Rr = { _driver: "webSQLStorage", _initStorage: mr, _support: lr(), iterate: pr2, getItem: yr, setItem: gr, removeItem: br, clear: _r, length: wr, key: Er, keys: Ir, dropInstance: Ar };
      function Dr() {
        try {
          return typeof localStorage < "u" && "setItem" in localStorage && !!localStorage.setItem;
        } catch {
          return false;
        }
      }
      function Ge2(e, t) {
        var r2 = e.name + "/";
        return e.storeName !== t.storeName && (r2 += e.storeName + "/"), r2;
      }
      function Nr() {
        var e = "_localforage_support_test";
        try {
          return localStorage.setItem(e, true), localStorage.removeItem(e), false;
        } catch {
          return true;
        }
      }
      function Tr() {
        return !Nr() || localStorage.length > 0;
      }
      function Br(e) {
        var t = this, r2 = {};
        if (e)
          for (var o2 in e)
            r2[o2] = e[o2];
        return r2.keyPrefix = Ge2(e, t._defaultConfig), Tr() ? (t._dbInfo = r2, r2.serializer = Ie2, m3.resolve()) : m3.reject();
      }
      function xr(e) {
        var t = this, r2 = t.ready().then(function() {
          for (var o2 = t._dbInfo.keyPrefix, i = localStorage.length - 1; i >= 0; i--) {
            var n = localStorage.key(i);
            n.indexOf(o2) === 0 && localStorage.removeItem(n);
          }
        });
        return _2(r2, e), r2;
      }
      function Or(e, t) {
        var r2 = this;
        e = z2(e);
        var o2 = r2.ready().then(function() {
          var i = r2._dbInfo, n = localStorage.getItem(i.keyPrefix + e);
          return n && (n = i.serializer.deserialize(n)), n;
        });
        return _2(o2, t), o2;
      }
      function Cr(e, t) {
        var r2 = this, o2 = r2.ready().then(function() {
          for (var i = r2._dbInfo, n = i.keyPrefix, f = n.length, u2 = localStorage.length, c2 = 1, l = 0; l < u2; l++) {
            var d2 = localStorage.key(l);
            if (d2.indexOf(n) === 0) {
              var y2 = localStorage.getItem(d2);
              if (y2 && (y2 = i.serializer.deserialize(y2)), y2 = e(y2, d2.substring(f), c2++), y2 !== void 0)
                return y2;
            }
          }
        });
        return _2(o2, t), o2;
      }
      function Lr(e, t) {
        var r2 = this, o2 = r2.ready().then(function() {
          var i = r2._dbInfo, n;
          try {
            n = localStorage.key(e);
          } catch {
            n = null;
          }
          return n && (n = n.substring(i.keyPrefix.length)), n;
        });
        return _2(o2, t), o2;
      }
      function Pr(e) {
        var t = this, r2 = t.ready().then(function() {
          for (var o2 = t._dbInfo, i = localStorage.length, n = [], f = 0; f < i; f++) {
            var u2 = localStorage.key(f);
            u2.indexOf(o2.keyPrefix) === 0 && n.push(u2.substring(o2.keyPrefix.length));
          }
          return n;
        });
        return _2(r2, e), r2;
      }
      function Mr(e) {
        var t = this, r2 = t.keys().then(function(o2) {
          return o2.length;
        });
        return _2(r2, e), r2;
      }
      function Fr(e, t) {
        var r2 = this;
        e = z2(e);
        var o2 = r2.ready().then(function() {
          var i = r2._dbInfo;
          localStorage.removeItem(i.keyPrefix + e);
        });
        return _2(o2, t), o2;
      }
      function Ur(e, t, r2) {
        var o2 = this;
        e = z2(e);
        var i = o2.ready().then(function() {
          t === void 0 && (t = null);
          var n = t;
          return new m3(function(f, u2) {
            var c2 = o2._dbInfo;
            c2.serializer.serialize(t, function(l, d2) {
              if (d2)
                u2(d2);
              else
                try {
                  localStorage.setItem(c2.keyPrefix + e, l), f(n);
                } catch (y2) {
                  (y2.name === "QuotaExceededError" || y2.name === "NS_ERROR_DOM_QUOTA_REACHED") && u2(y2), u2(y2);
                }
            });
          });
        });
        return _2(i, r2), i;
      }
      function Yr(e, t) {
        if (t = Z2.apply(this, arguments), e = typeof e != "function" && e || {}, !e.name) {
          var r2 = this.config();
          e.name = e.name || r2.name, e.storeName = e.storeName || r2.storeName;
        }
        var o2 = this, i;
        return e.name ? i = new m3(function(n) {
          e.storeName ? n(Ge2(e, o2._defaultConfig)) : n(e.name + "/");
        }).then(function(n) {
          for (var f = localStorage.length - 1; f >= 0; f--) {
            var u2 = localStorage.key(f);
            u2.indexOf(n) === 0 && localStorage.removeItem(u2);
          }
        }) : i = m3.reject("Invalid arguments"), _2(i, t), i;
      }
      var zr = { _driver: "localStorageWrapper", _initStorage: Br, _support: Dr(), iterate: Cr, getItem: Or, setItem: Ur, removeItem: Fr, clear: xr, length: Mr, key: Lr, keys: Pr, dropInstance: Yr }, Wr = function(t, r2) {
        return t === r2 || typeof t == "number" && typeof r2 == "number" && isNaN(t) && isNaN(r2);
      }, Kr = function(t, r2) {
        for (var o2 = t.length, i = 0; i < o2; ) {
          if (Wr(t[i], r2))
            return true;
          i++;
        }
        return false;
      }, je2 = Array.isArray || function(e) {
        return Object.prototype.toString.call(e) === "[object Array]";
      }, le2 = {}, Xe2 = {}, ue2 = { INDEXEDDB: cr, WEBSQL: Rr, LOCALSTORAGE: zr }, Hr = [ue2.INDEXEDDB._driver, ue2.WEBSQL._driver, ue2.LOCALSTORAGE._driver], me2 = ["dropInstance"], Se2 = ["clear", "getItem", "iterate", "key", "keys", "length", "removeItem", "setItem"].concat(me2), Vr = { description: "", driver: Hr.slice(), name: "localforage", size: 4980736, storeName: "keyvaluepairs", version: 1 };
      function Gr(e, t) {
        e[t] = function() {
          var r2 = arguments;
          return e.ready().then(function() {
            return e[t].apply(e, r2);
          });
        };
      }
      function Ae2() {
        for (var e = 1; e < arguments.length; e++) {
          var t = arguments[e];
          if (t)
            for (var r2 in t)
              t.hasOwnProperty(r2) && (je2(t[r2]) ? arguments[0][r2] = t[r2].slice() : arguments[0][r2] = t[r2]);
        }
        return arguments[0];
      }
      var jr = function() {
        function e(t) {
          Y2(this, e);
          for (var r2 in ue2)
            if (ue2.hasOwnProperty(r2)) {
              var o2 = ue2[r2], i = o2._driver;
              this[r2] = i, le2[i] || this.defineDriver(o2);
            }
          this._defaultConfig = Ae2({}, Vr), this._config = Ae2({}, this._defaultConfig, t), this._driverSet = null, this._initDriver = null, this._ready = false, this._dbInfo = null, this._wrapLibraryMethodsWithReady(), this.setDriver(this._config.driver).catch(function() {
          });
        }
        return e.prototype.config = function(r2) {
          if ((typeof r2 > "u" ? "undefined" : P2(r2)) === "object") {
            if (this._ready)
              return new Error("Can't call config() after localforage has been used.");
            for (var o2 in r2) {
              if (o2 === "storeName" && (r2[o2] = r2[o2].replace(/\W/g, "_")), o2 === "version" && typeof r2[o2] != "number")
                return new Error("Database version must be a number.");
              this._config[o2] = r2[o2];
            }
            return "driver" in r2 && r2.driver ? this.setDriver(this._config.driver) : true;
          } else
            return typeof r2 == "string" ? this._config[r2] : this._config;
        }, e.prototype.defineDriver = function(r2, o2, i) {
          var n = new m3(function(f, u2) {
            try {
              var c2 = r2._driver, l = new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");
              if (!r2._driver) {
                u2(l);
                return;
              }
              for (var d2 = Se2.concat("_initStorage"), y2 = 0, S2 = d2.length; y2 < S2; y2++) {
                var x2 = d2[y2], C2 = !Kr(me2, x2);
                if ((C2 || r2[x2]) && typeof r2[x2] != "function") {
                  u2(l);
                  return;
                }
              }
              var K2 = function() {
                for (var de2 = function(Jr) {
                  return function() {
                    var $r = new Error("Method " + Jr + " is not implemented by the current driver"), Qe2 = m3.reject($r);
                    return _2(Qe2, arguments[arguments.length - 1]), Qe2;
                  };
                }, Re2 = 0, Qr = me2.length; Re2 < Qr; Re2++) {
                  var De2 = me2[Re2];
                  r2[De2] || (r2[De2] = de2(De2));
                }
              };
              K2();
              var W2 = function(de2) {
                le2[c2] && console.info("Redefining LocalForage driver: " + c2), le2[c2] = r2, Xe2[c2] = de2, f();
              };
              "_support" in r2 ? r2._support && typeof r2._support == "function" ? r2._support().then(W2, u2) : W2(!!r2._support) : W2(true);
            } catch (q2) {
              u2(q2);
            }
          });
          return B(n, o2, i), n;
        }, e.prototype.driver = function() {
          return this._driver || null;
        }, e.prototype.getDriver = function(r2, o2, i) {
          var n = le2[r2] ? m3.resolve(le2[r2]) : m3.reject(new Error("Driver not found."));
          return B(n, o2, i), n;
        }, e.prototype.getSerializer = function(r2) {
          var o2 = m3.resolve(Ie2);
          return B(o2, r2), o2;
        }, e.prototype.ready = function(r2) {
          var o2 = this, i = o2._driverSet.then(function() {
            return o2._ready === null && (o2._ready = o2._initDriver()), o2._ready;
          });
          return B(i, r2, r2), i;
        }, e.prototype.setDriver = function(r2, o2, i) {
          var n = this;
          je2(r2) || (r2 = [r2]);
          var f = this._getSupportedDrivers(r2);
          function u2() {
            n._config.driver = n.driver();
          }
          function c2(y2) {
            return n._extend(y2), u2(), n._ready = n._initStorage(n._config), n._ready;
          }
          function l(y2) {
            return function() {
              var S2 = 0;
              function x2() {
                for (; S2 < y2.length; ) {
                  var C2 = y2[S2];
                  return S2++, n._dbInfo = null, n._ready = null, n.getDriver(C2).then(c2).catch(x2);
                }
                u2();
                var K2 = new Error("No available storage method found.");
                return n._driverSet = m3.reject(K2), n._driverSet;
              }
              return x2();
            };
          }
          var d2 = this._driverSet !== null ? this._driverSet.catch(function() {
            return m3.resolve();
          }) : m3.resolve();
          return this._driverSet = d2.then(function() {
            var y2 = f[0];
            return n._dbInfo = null, n._ready = null, n.getDriver(y2).then(function(S2) {
              n._driver = S2._driver, u2(), n._wrapLibraryMethodsWithReady(), n._initDriver = l(f);
            });
          }).catch(function() {
            u2();
            var y2 = new Error("No available storage method found.");
            return n._driverSet = m3.reject(y2), n._driverSet;
          }), B(this._driverSet, o2, i), this._driverSet;
        }, e.prototype.supports = function(r2) {
          return !!Xe2[r2];
        }, e.prototype._extend = function(r2) {
          Ae2(this, r2);
        }, e.prototype._getSupportedDrivers = function(r2) {
          for (var o2 = [], i = 0, n = r2.length; i < n; i++) {
            var f = r2[i];
            this.supports(f) && o2.push(f);
          }
          return o2;
        }, e.prototype._wrapLibraryMethodsWithReady = function() {
          for (var r2 = 0, o2 = Se2.length; r2 < o2; r2++)
            Gr(this, Se2[r2]);
        }, e.prototype.createInstance = function(r2) {
          return new e(r2);
        }, e;
      }(), Xr = new jr();
      D2.exports = Xr;
    }, { 3: 3 }] }, {}, [4])(4);
  });
});
var rr = $e2((ye2, er) => {
  (function(b2, A) {
    typeof ye2 == "object" && typeof er < "u" ? A(ye2) : typeof define == "function" && define.amd ? define("localforage-driver-memory", ["exports"], A) : A(b2.LocalforageDriverMemory = {});
  })(typeof self < "u" ? self : ye2, function(b2) {
    "use strict";
    var A = "localforage-driver-memory";
    function R(a2) {
      var s = typeof Symbol == "function" && a2[Symbol.iterator], v2 = 0;
      return s ? s.call(a2) : { next: function() {
        return a2 && v2 >= a2.length && (a2 = void 0), { value: a2 && a2[v2++], done: !a2 };
      } };
    }
    function L2(a2, s) {
      a2 = a2 || [], s = s || {};
      try {
        return new Blob(a2, s);
      } catch (w2) {
        if (w2.name !== "TypeError")
          throw w2;
        for (var v2 = typeof BlobBuilder < "u" ? BlobBuilder : typeof MSBlobBuilder < "u" ? MSBlobBuilder : typeof MozBlobBuilder < "u" ? MozBlobBuilder : WebKitBlobBuilder, p2 = new v2(), g2 = 0; g2 < a2.length; g2 += 1)
          p2.append(a2[g2]);
        return p2.getBlob(s.type);
      }
    }
    var D2 = /^~~local_forage_type~([^~]+)~/, X2 = 9, P2 = X2 + 4, Y2 = Object.prototype.toString;
    function I(a2) {
      var s = a2.length * 0.75, v2 = a2.length;
      a2[a2.length - 1] === "=" && (s--, a2[a2.length - 2] === "=" && s--);
      for (var p2 = new ArrayBuffer(s), g2 = new Uint8Array(p2), w2 = 0, T = 0; w2 < v2; w2 += 4) {
        var G2 = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(a2[w2]), fe2 = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(a2[w2 + 1]), ie = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(a2[w2 + 2]), ce2 = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(a2[w2 + 3]);
        g2[T++] = G2 << 2 | fe2 >> 4, g2[T++] = (fe2 & 15) << 4 | ie >> 2, g2[T++] = (ie & 3) << 6 | ce2 & 63;
      }
      return p2;
    }
    function M2(a2) {
      for (var s = new Uint8Array(a2), v2 = "", p2 = 0; p2 < s.length; p2 += 3)
        v2 += "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[s[p2] >> 2], v2 += "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(s[p2] & 3) << 4 | s[p2 + 1] >> 4], v2 += "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(s[p2 + 1] & 15) << 2 | s[p2 + 2] >> 6], v2 += "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[s[p2 + 2] & 63];
      return s.length % 3 === 2 ? v2 = v2.substring(0, v2.length - 1) + "=" : s.length % 3 === 1 && (v2 = v2.substring(0, v2.length - 2) + "=="), v2;
    }
    function H2(a2, s) {
      var v2 = "";
      if (a2 && (v2 = Y2.call(a2)), a2 && (v2 === "[object ArrayBuffer]" || a2.buffer && Y2.call(a2.buffer) === "[object ArrayBuffer]")) {
        var p2 = void 0, g2 = "__lfsc__:";
        a2 instanceof ArrayBuffer ? (p2 = a2, g2 += "arbf") : (p2 = a2.buffer, v2 === "[object Int8Array]" ? g2 += "si08" : v2 === "[object Uint8Array]" ? g2 += "ui08" : v2 === "[object Uint8ClampedArray]" ? g2 += "uic8" : v2 === "[object Int16Array]" ? g2 += "si16" : v2 === "[object Uint16Array]" ? g2 += "ur16" : v2 === "[object Int32Array]" ? g2 += "si32" : v2 === "[object Uint32Array]" ? g2 += "ui32" : v2 === "[object Float32Array]" ? g2 += "fl32" : v2 === "[object Float64Array]" ? g2 += "fl64" : s(new Error("Failed to get type for BinaryArray"))), s(g2 + M2(p2));
      } else if (v2 === "[object Blob]") {
        var w2 = new FileReader();
        w2.onload = function() {
          var T = "~~local_forage_type~" + a2.type + "~" + M2(this.result);
          s("__lfsc__:blob" + T);
        }, w2.readAsArrayBuffer(a2);
      } else
        try {
          s(JSON.stringify(a2));
        } catch (T) {
          console.error("Couldn't convert value into a JSON string: ", a2), s(null, T);
        }
    }
    function $2(a2) {
      if (a2.substring(0, X2) !== "__lfsc__:")
        return JSON.parse(a2);
      var s = a2.substring(P2), v2 = a2.substring(X2, P2), p2;
      if (v2 === "blob" && D2.test(s)) {
        var g2 = s.match(D2);
        p2 = g2[1], s = s.substring(g2[0].length);
      }
      var w2 = I(s);
      switch (v2) {
        case "arbf":
          return w2;
        case "blob":
          return L2([w2], { type: p2 });
        case "si08":
          return new Int8Array(w2);
        case "ui08":
          return new Uint8Array(w2);
        case "uic8":
          return new Uint8ClampedArray(w2);
        case "si16":
          return new Int16Array(w2);
        case "ur16":
          return new Uint16Array(w2);
        case "si32":
          return new Int32Array(w2);
        case "ui32":
          return new Uint32Array(w2);
        case "fl32":
          return new Float32Array(w2);
        case "fl64":
          return new Float64Array(w2);
        default:
          throw new Error("Unkown type: " + v2);
      }
    }
    function m3(a2) {
      var s, v2;
      if (a2 === null || typeof a2 != "object" || "isActiveClone" in a2)
        return a2;
      var p2 = a2 instanceof Date ? new Date(a2) : a2.constructor();
      try {
        for (var g2 = R(Object.keys(a2)), w2 = g2.next(); !w2.done; w2 = g2.next()) {
          var T = w2.value;
          Object.prototype.hasOwnProperty.call(a2, T) && (a2.isActiveClone = null, p2[T] = m3(a2[T]), delete a2.isActiveClone);
        }
      } catch (G2) {
        s = { error: G2 };
      } finally {
        try {
          w2 && !w2.done && (v2 = g2.return) && v2.call(g2);
        } finally {
          if (s)
            throw s.error;
        }
      }
      return p2;
    }
    function _2(a2, s) {
      return (a2.name || s.name) + "/" + (a2.storeName || s.storeName) + "/";
    }
    function B(a2, s) {
      s && a2.then(function(v2) {
        s(null, v2);
      }, function(v2) {
        s(v2);
      });
    }
    function z2() {
      for (var a2 = [], s = 0; s < arguments.length; s++)
        a2[s] = arguments[s];
      if (arguments.length && typeof arguments[arguments.length - 1] == "function")
        return arguments[arguments.length - 1];
    }
    function Z2(a2, s) {
      var v2 = this;
      if (s = z2.apply(this, arguments), a2 = typeof a2 != "function" && a2 || {}, !a2.name) {
        var p2 = this.config();
        a2.name = a2.name || p2.name, a2.storeName = a2.storeName || p2.storeName;
      }
      var g2;
      return a2.name ? g2 = new Promise(function(w2) {
        a2.storeName ? w2(_2(a2, v2._defaultConfig)) : w2(a2.name + "/");
      }) : g2 = Promise.reject("Invalid arguments"), { promise: g2, callback: s };
    }
    function F2(a2) {
      return typeof a2 != "string" && (console.warn(a2 + " used as a key, but it is not a string."), a2 = String(a2)), a2;
    }
    var k2 = { bufferToString: M2, deserialize: $2, serialize: H2, stringToBuffer: I }, U = {}, ae2 = function() {
      function a2(s) {
        this.kp = s, this.data = {};
      }
      return a2.resolve = function(s) {
        return U[s] || (U[s] = new a2(s)), U[s];
      }, a2.prototype.clear = function() {
        this.data = {};
      }, a2.prototype.drop = function() {
        this.clear(), delete U[this.kp];
      }, a2.prototype.get = function(s) {
        return this.data[s];
      }, a2.prototype.key = function(s) {
        return this.keys()[s];
      }, a2.prototype.keys = function() {
        return Object.keys(this.data);
      }, a2.prototype.rm = function(s) {
        delete this.data[s];
      }, a2.prototype.set = function(s, v2) {
        this.data[s] = v2;
      }, a2;
    }();
    function re2(a2) {
      var s = a2 ? m3(a2) : {}, v2 = _2(s, this._defaultConfig), p2 = ae2.resolve(v2);
      return this._dbInfo = s, this._dbInfo.serializer = k2, this._dbInfo.keyPrefix = v2, this._dbInfo.mStore = p2, Promise.resolve();
    }
    function h2(a2) {
      var s = this, v2 = this.ready().then(function() {
        s._dbInfo.mStore.clear();
      });
      return B(v2, a2), v2;
    }
    function N2(a2, s) {
      var v2 = Z2.apply(this, arguments), p2 = v2.promise, g2 = v2.callback, w2 = p2.then(function(T) {
        ae2.resolve(T).drop();
      });
      return B(w2, g2), p2;
    }
    function E2(a2, s) {
      var v2 = this;
      a2 = F2(a2);
      var p2 = this.ready().then(function() {
        var g2 = v2._dbInfo.mStore.get(a2);
        return g2 == null ? null : v2._dbInfo.serializer.deserialize(g2);
      });
      return B(p2, s), p2;
    }
    function O(a2, s) {
      var v2 = this, p2 = this.ready().then(function() {
        for (var g2 = v2._dbInfo.mStore, w2 = g2.keys(), T = 0; T < w2.length; T++) {
          var G2 = g2.get(w2[T]);
          if (G2 && (G2 = v2._dbInfo.serializer.deserialize(G2)), G2 = a2(G2, w2[T], T + 1), G2 !== void 0)
            return G2;
        }
      });
      return B(p2, s), p2;
    }
    function V(a2, s) {
      var v2 = this, p2 = this.ready().then(function() {
        var g2;
        try {
          g2 = v2._dbInfo.mStore.key(a2), g2 === void 0 && (g2 = null);
        } catch {
          g2 = null;
        }
        return g2;
      });
      return B(p2, s), p2;
    }
    function j2(a2) {
      var s = this, v2 = this.ready().then(function() {
        return s._dbInfo.mStore.keys();
      });
      return B(v2, a2), v2;
    }
    function Q2(a2) {
      var s = this.keys().then(function(v2) {
        return v2.length;
      });
      return B(s, a2), s;
    }
    function J2(a2, s) {
      var v2 = this;
      a2 = F2(a2);
      var p2 = this.ready().then(function() {
        v2._dbInfo.mStore.rm(a2);
      });
      return B(p2, s), p2;
    }
    function ee2(a2, s, v2) {
      var p2 = this;
      a2 = F2(a2);
      var g2 = this.ready().then(function() {
        s === void 0 && (s = null);
        var w2 = s;
        return new Promise(function(T, G2) {
          p2._dbInfo.serializer.serialize(s, function(fe2, ie) {
            if (ie)
              G2(ie);
            else
              try {
                p2._dbInfo.mStore.set(a2, fe2), T(w2);
              } catch (ce2) {
                G2(ce2);
              }
          });
        });
      });
      return B(g2, v2), g2;
    }
    var oe = true;
    b2._support = oe, b2._driver = A, b2._initStorage = re2, b2.clear = h2, b2.dropInstance = N2, b2.getItem = E2, b2.iterate = O, b2.key = V, b2.keys = j2, b2.length = Q2, b2.removeItem = J2, b2.setItem = ee2, Object.defineProperty(b2, "__esModule", { value: true });
  });
});
var ge2 = Ze2(ke2());
var Te2 = Ze2(rr());
var at = { display: "none", position: "fixed", top: "0", right: "0", width: "100%", height: "100%", borderRadius: "0", border: "none", zIndex: "2147483647" };
function ft2(b2) {
  for (let [A, R] of Object.entries(at))
    b2.style[A] = R;
}
function ut2(b2) {
  let A = [].slice.call(document.querySelectorAll(".magic-iframe"));
  return Boolean(A.find((R) => R.src.includes(b2)));
}
var pe2 = class extends Le {
  constructor() {
    super(...arguments);
    this.activeElement = null;
  }
  init() {
    this.test = "hello", this.iframe = new Promise((R) => {
      let L2 = () => {
        if (ut2(encodeURIComponent(this.parameters)))
          ur().log();
        else {
          let D2 = document.createElement("iframe");
          D2.classList.add("magic-iframe"), D2.dataset.magicIframeLabel = we(this.endpoint).host, D2.title = "Secure Modal", D2.src = we(`/send?params=${encodeURIComponent(this.parameters)}`, this.endpoint).href, ft2(D2), document.body.appendChild(D2), R(D2);
        }
      };
      ["loaded", "interactive", "complete"].includes(document.readyState) ? L2() : window.addEventListener("load", L2, false);
    }), window.addEventListener("message", (R) => {
      var L2;
      if (R.origin === this.endpoint && R.data && R.data.msgType && this.messageHandlers.size) {
        R.data.response = (L2 = R.data.response) != null ? L2 : {};
        for (let D2 of this.messageHandlers.values())
          D2(R);
      }
    });
  }
  showOverlay() {
    return se2(this, null, function* () {
      let R = yield this.iframe;
      R.style.display = "block", this.activeElement = document.activeElement, R.focus();
    });
  }
  hideOverlay() {
    return se2(this, null, function* () {
      var L2;
      let R = yield this.iframe;
      R.style.display = "none", (L2 = this.activeElement) != null && L2.focus && this.activeElement.focus(), this.activeElement = null;
    });
  }
  _post(R) {
    return se2(this, null, function* () {
      let L2 = yield this.iframe;
      if (L2 && L2.contentWindow)
        L2.contentWindow.postMessage(R, this.endpoint);
      else
        throw pr();
    });
  }
};
var bt2 = Tn(Re, { platform: "web", sdkName: "magic-sdk", version: "13.6.0", defaultEndpoint: "https://auth.magic.link/", ViewController: pe2, configureStorage: () => se2(void 0, null, function* () {
  let b2 = ge2.default.createInstance({ name: "MagicAuthLocalStorageDB", storeName: "MagicAuthLocalStorage" });
  return yield b2.defineDriver(Te2), yield b2.setDriver([ge2.default.INDEXEDDB, ge2.default.LOCALSTORAGE, Te2._driver]), b2;
}) });
export {
  c as EthChainType,
  w as Extension,
  J as ExtensionError,
  X as ExtensionWarning,
  bt2 as Magic,
  o as MagicIncomingWindowMessage,
  r as MagicOutgoingWindowMessage,
  u as MagicPayloadMethod,
  N as RPCError,
  p as RPCErrorCode,
  b as SDKError,
  m as SDKErrorCode,
  q as SDKWarning,
  a as SDKWarningCode,
  ut as isPromiEvent
};
//# sourceMappingURL=magic-sdk.js.map
